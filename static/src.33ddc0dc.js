parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"VuXv":[function(require,module,exports) {
var define;
var t,r=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{u({},"")}catch(P){u=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype),a=new G(n||[]);return i._invoke=function(t,r,e){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=j(a,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===l)throw n=y,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=p;var u=f(t,r,e);if("normal"===u.type){if(n=e.done?y:s,u.arg===v)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=y,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(P){return{type:"throw",arg:P}}}t.wrap=h;var l="suspendedStart",s="suspendedYield",p="executing",y="completed",v={};function d(){}function g(){}function m(){}var w={};w[i]=function(){return this};var L=Object.getPrototypeOf,x=L&&L(L(N([])));x&&x!==e&&n.call(x,i)&&(w=x);var b=m.prototype=d.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(r){u(t,r,function(t){return this._invoke(r,t)})})}function _(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?r.resolve(l.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(l).then(function(t){h.value=t,a(h)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function j(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:r,done:!0}}return g.prototype=b.constructor=m,m.constructor=g,g.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===g||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},E(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new _(h(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(b),u(b,c,"Generator"),b[i]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}
},{}],"Jye3":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t){return Array.isArray(t)}function e(r){return"object"===t(r)&&null!==r&&r.constructor===Object&&"[object Object]"===Object.prototype.toString.call(r)}function o(t){return e(t)||r(t)}function n(t){var n=new Map,c=function t(c){if(!o(c))return c;if(r(c)){var u=[];return n.set(c,u),c.forEach(function(r){n.has(r)?u.push(n.get(r)):u.push(t(r))}),u}if(e(c)){var f={};for(var i in n.set(c,f),c)if(Object.prototype.hasOwnProperty.call(c,i)){var p=c[i];n.has(p)?f[i]=n.get(p):f[i]=t(p)}return f}}(t);return n.clear(),c}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneDeep=void 0,exports.cloneDeep=n;
},{}],"QapI":[function(require,module,exports) {
"use strict";function e(e){return 0==e||("number"==typeof e||(null===e||("boolean"==typeof e||(void 0===e||(!(!Array.isArray(e)||0!==e.length)||!(void 0!==e.size&&e.size>0)&&(0===Object.keys(e).length||0===e.size))))))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmpty=void 0,exports.isEmpty=e;
},{}],"a1Qj":[function(require,module,exports) {
"use strict";function e(r,t){var c=function(e){return!!e&&e.constructor===Object};return c(r)&&c(t)?(Object.keys(t).forEach(function(o){var n=r[o],s=t[o];Array.isArray(n)&&Array.isArray(s)?r[o]=n.concat(s):c(n)&&c(s)?r[o]=e(Object.assign({},n),s):r[o]=s}),r):t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeDeep=void 0,exports.mergeDeep=e;
},{}],"IBfS":[function(require,module,exports) {
"use strict";function r(e,t){var c=function(r){return!!r&&r.constructor===Object};return c(e)&&c(t)?(Object.keys(t).forEach(function(s){var o=e[s],n=t[s];Array.isArray(o)&&Array.isArray(n)?e[s]=o.concat(n):c(o)&&c(n)?e[s]=r(Object.assign({},o),n):e[s]=n}),e):t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeObjects=void 0,exports.mergeObjects=r;
},{}],"ce8K":[function(require,module,exports) {
"use strict";var E;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Actions=void 0,function(E){E.RIGHTSIDEBAR_CHANGE_VIEW="RIGHTSIDEBAR_CHANGE_VIEW",E.LEFTSIDEBAR_CHANGE_VIEW="LEFTSIDEBAR_CHANGE_VIEW",E.ACCOUNT_SETTINGS_UPDATE="ACCOUNT_SETTINGS_UPDATE",E.ACCOUNT_PASSWORD_CHANGE="ACCOUNT_PASSWORD_CHANGE",E.AUTH_SIGN_IN="AUTH_SIGN_IN",E.AUTH_LOGOUT="AUTH_LOGOUT",E.CHATS_SELECT_CHAT="CHATS_SELECT_CHAT",E.CHATS_UPDATE_CHAT="CHATS_UPDATE_CHAT",E.CHATS_UPLOAD_CHATS="CHATS_UPLOAD_CHATS",E.SELECTED_CHAT_CHANGE="SELECTED_CHAT_CHANGE",E.TOKENS_SAVE="TOKENS_SAVE",E.MESSENGER_SAVE="MESSENGER_SAVE",E.MESSENGER_UPDATE_CHAT="MESSENGER_UPDATE_CHAT",E.USERS_SAVE="USERS_SAVE"}(E=exports.Actions||(exports.Actions={}));
},{}],"D2p9":[function(require,module,exports) {
"use strict";function e(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rootReducer=void 0;var s=require("../../utils/mergeDeep"),t=require("../../utils/mergeObjects"),a=require("./actionTypes");function c(c,n){var i;switch(n.type){case a.Actions.RIGHTSIDEBAR_CHANGE_VIEW:return i=c.rightSidebar||{},Object.assign(Object.assign({},c),{rightSidebar:Object.assign({},t.mergeObjects(i,n.data))});case a.Actions.LEFTSIDEBAR_CHANGE_VIEW:return i=c.leftSidebar||{},Object.assign(Object.assign({},c),{leftSidebar:Object.assign({},t.mergeObjects(i,n.data))});case a.Actions.CHATS_SELECT_CHAT:case a.Actions.CHATS_UPDATE_CHAT:return i=c.chats||{},Object.assign(Object.assign({},c),{chats:Object.assign({},t.mergeObjects(i,n.data))});case a.Actions.CHATS_UPLOAD_CHATS:return i=c.chats||{},Object.assign(Object.assign({},c),{chats:Object.assign(Object.assign({},i),{availableChats:n.data})});case a.Actions.SELECTED_CHAT_CHANGE:return i=c.selectedChatId||{},Object.assign(Object.assign({},c),{selectedChatId:n.data});case a.Actions.ACCOUNT_SETTINGS_UPDATE:return i=c.accountSettings||{},Object.assign(Object.assign({},c),{accountSettings:Object.assign({},s.mergeDeep(i,n.data))});case a.Actions.ACCOUNT_PASSWORD_CHANGE:return i=c.accountSettings||{},Object.assign({},c);case a.Actions.AUTH_SIGN_IN:return i=c.session||{},Object.assign(Object.assign({},c),{session:Object.assign({},s.mergeDeep(i,{login:n.data}))});case a.Actions.AUTH_LOGOUT:return i=c.session||{},Object.assign(Object.assign({},c),{session:{},rightSidebar:{},accountSettings:{},selectedChatId:null,users:{},chats:{}});case a.Actions.TOKENS_SAVE:return i=c.tokens||{},Object.assign(Object.assign({},c),{tokens:Object.assign({},s.mergeDeep(i,e({},n.data.chatId,n.data.token)))});case a.Actions.MESSENGER_SAVE:return i=c.messenger||{},Object.assign(Object.assign({},c),{messenger:Object.assign({},s.mergeDeep(i,e({},n.data.chatId,n.data.messages)))});case a.Actions.MESSENGER_UPDATE_CHAT:return i=c.messenger||{},Object.assign(Object.assign({},c),{messenger:Object.assign(Object.assign({},i),e({},n.data.chatId,n.data.messages))});case a.Actions.USERS_SAVE:return i=c.users||{},Object.assign(Object.assign({},c),{users:Object.assign(Object.assign({},i),n.data)});default:return c}}exports.rootReducer=c;
},{"../../utils/mergeDeep":"a1Qj","../../utils/mergeObjects":"IBfS","./actionTypes":"ce8K"}],"RuC9":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStore=exports.Store=void 0;var i=require("../../utils/cloneDeep"),s=require("../../utils/isEmpty"),n=require("./rootReducer"),u=function(){function e(r,i){t(this,e),this.rootReducer=r,this.initialState=i,this.state={},this.prevState={},this.subscribers=[],this.state=r(Object.assign({},this.initialState),{type:"__INIT__"})}return r(e,[{key:"subscribe",value:function(t){return this.subscribers.push(t),{unsubscribe:function(){this.subscribers=this.subscribers.filter(function(e){return e!==t})}.bind(this)}}},{key:"dispatch",value:function(t){var e=this;this.prevState=i.cloneDeep(this.state),this.state=this.rootReducer(this.state,t),this.subscribers.forEach(function(t){return t(e.state,e.prevState)})}},{key:"getState",value:function(){return this.state}}],[{key:"get",value:function(){return a(n.rootReducer)}}]),e}();function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u._instance&&!s.isEmpty(u._instance)||(u._instance=new u(t,e)),u._instance}exports.Store=u,u._instance={},exports.createStore=a;
},{"../../utils/cloneDeep":"Jye3","../../utils/isEmpty":"QapI","./rootReducer":"D2p9"}],"OF6u":[function(require,module,exports) {
"use strict";function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?(localStorage.setItem(e,JSON.stringify(t)),!0):JSON.parse(localStorage.getItem(e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.storage=void 0,exports.storage=e;
},{}],"iuWH":[function(require,module,exports) {
"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function t(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function e(r){return i(r)||o(r)||a(r)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function i(r){if(Array.isArray(r))return u(r)}function s(r,t){var e;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(e=a(r))||t&&r&&"number"==typeof r.length){e&&(r=e);var n=0,o=function(){};return{s:o,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){e=r[Symbol.iterator]()},n:function(){var r=e.next();return s=r.done,r},e:function(r){u=!0,i=r},f:function(){try{s||null==e.return||e.return()}finally{if(u)throw i}}}}function a(r,t){if(r){if("string"==typeof r)return u(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(r,t):void 0}}function u(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSuccess=exports.isEqual=exports.isArrayOrObject=exports.isPlainObject=exports.isArray=exports.arrayUnique=exports.removeNonCSSSymbolsFromStr=exports.lodashToStr=exports.strToLodash=exports.getFormData=exports.strContains=exports.getUrlParameter=exports.last=exports.first=exports.strToColor=exports.trim=exports.trimQuotes=exports.isUndefined=exports.getUniqueStr=exports.get=exports.dashToCap=exports.capToDashCase=exports.camelToDashCase=exports.capitalize=void 0;var c=require("./isEmpty");function p(r){return"string"!=typeof r?"":r.charAt(0).toUpperCase()+r.slice(1)}function f(r){return r.replace(/([A-Z])/g,function(r){return"-".concat(r[0].toLowerCase())})}function l(r){return f(r).slice(1)}function y(r){return r.split("-").map(m).join("")}function m(r){return r.charAt(0).toUpperCase()+r.slice(1)}function x(r,t,e){if(!t||c.isEmpty(r))return e;var n,o=r,i=s(t.split("."));try{for(i.s();!(n=i.n()).done;){var a=n.value,u=void 0,p=a.split(/[[\]]+/gi);if(void 0===(u=p.length>1?o[p[0]][p[1]]:o[a]))return e;o=u}}catch(f){i.e(f)}finally{i.f()}return void 0!==o?o:e}function b(){return Math.random().toString(36).substr(2,9)}function g(r){return void 0===r}function d(r){return r.replace(/^["'](.+(?=["']$))["']$/gi,"$1")}function h(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return r.trim();var e=new RegExp("^[".concat(t,"]+|[").concat(t,"]+$"),"g");return r.replace(e,"")}function v(r){return A(S(r))}function S(r){if(!r)return 0;for(var t=0,e=0;e<r.length;e++)t=r.charCodeAt(e)+((t<<5)-t);return t}function A(r){var t=(16777215&r).toString(16).toUpperCase();return"#".concat("00000".substring(0,6-t.length)+t)}function O(r){return Array.isArray(r)&&0!==r.length?r[0]:{}}function j(r){return Array.isArray(r)&&0!==r.length?r[r.length-1]:null}function C(r){return new URL(location.href).searchParams.get(r)}function w(r,t){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]||(t=t.toLowerCase(),r=r.toLowerCase()),-1!==t.indexOf(r)}function T(r){return e(r.entries()).reduce(function(r,e){return Object.assign(r,t({},e[0],e[1]))},{})}function U(r){return r.toLowerCase().replace(/\s/gi,"_")}function P(r){return(r=r.replace(/_/gi," ")).charAt(0).toUpperCase()+r.slice(1)}function E(r){return r.replace(/[;:.,&%@#]/,"")}function q(r){var t=new Set(r);return Array.from(t)}function L(r){return Array.isArray(r)}function D(t){return"object"===r(t)&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t)}function I(r){return D(r)||L(r)}function N(r,t){var e=function(r){return!!r&&r.constructor===Object};if(!(e(r)&&e(t)||Array.isArray(r)&&Array.isArray(t)))return r===t;if(Object.getOwnPropertyNames(r).length!==Object.getOwnPropertyNames(t).length)return!1;var n=!0;return Object.getOwnPropertyNames(r).forEach(function(e){N(r[e],t[e])||(n=!1)}),n}function $(r){return"success"===r}exports.capitalize=p,exports.camelToDashCase=f,exports.capToDashCase=l,exports.dashToCap=y,exports.get=x,exports.getUniqueStr=b,exports.isUndefined=g,exports.trimQuotes=d,exports.trim=h,exports.strToColor=v,exports.first=O,exports.last=j,exports.getUrlParameter=C,exports.strContains=w,exports.getFormData=T,exports.strToLodash=U,exports.lodashToStr=P,exports.removeNonCSSSymbolsFromStr=E,exports.arrayUnique=q,exports.isArray=L,exports.isPlainObject=D,exports.isArrayOrObject=I,exports.isEqual=N,exports.isSuccess=$;
},{"./isEmpty":"QapI"}],"eAIa":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.$=void 0;var i=require("./pure-functions"),r=function(){function t(n){e(this,t),this.$el="string"==typeof n?document.querySelector(n):n}return n(t,[{key:"node",value:function(){return this.$el}},{key:"html",value:function(e){return"string"==typeof e?(this.$el.innerHTML=e.trim(),this):this.$el.outerHTML.trim()}},{key:"text",value:function(e){return"string"==typeof e?(this.$el.textContent=e,this):"input"===this.$el.tagName.toLowerCase()?this.$el.value.trim():this.$el.textContent.trim()}},{key:"val",value:function(e){return"string"==typeof e?("textarea"===this.$el.tagName.toLowerCase()&&(this.$el.textContent=e),"input"===this.$el.tagName.toLowerCase()&&(this.$el.value=e),this):"input"===this.$el.tagName.toLowerCase()?this.$el.value.trim():this.$el.textContent.trim()}},{key:"data",get:function(){return this.$el.dataset}},{key:"firstChild",value:function(){return s(this.$el.content.childNodes[0])}},{key:"clear",value:function(){return this.html(""),this}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.$el.addEventListener(e,t,n),this}},{key:"off",value:function(e,t){return this.$el.removeEventListener(e,t),this}},{key:"find",value:function(e){return s(this.$el.querySelector(e))}},{key:"findAll",value:function(e){return Array.from(this.$el.querySelectorAll(e))}},{key:"css",value:function(e){var t=this;return Object.keys(e).forEach(function(n){t.$el.setAttribute("style","".concat(n,": ").concat(e[n],";"))}),this}},{key:"hasClass",value:function(e){var t;return null===(t=this.$el)||void 0===t?void 0:t.classList.contains(e)}},{key:"hasId",value:function(e){return this.$el.id===e}},{key:"addClass",value:function(e){var t;return null===(t=this.$el)||void 0===t||t.classList.add(e),this}},{key:"removeClass",value:function(e){return this.$el.classList.remove(e),this}},{key:"toggleClass",value:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e),this}},{key:"closest",value:function(e){return s(this.$el.closest(e))}},{key:"parent",value:function(){return s(this.$el.parentNode)}},{key:"replaceChild",value:function(e,t){return this.$el.replaceChild(e.$el,t.$el),this}},{key:"append",value:function(e){return e instanceof t&&(e=e.$el),void 0!==Element.prototype.append?this.$el.append(e):this.$el.appendChild(e),this}},{key:"isEmpty",value:function(){return void 0===this.$el}},{key:"remove",value:function(){this.$el.remove()}}]),t}();function s(e){return new r(e)}exports.$=s,s.create=function(e,t){var n=document.createElement(e);t&&t.split(" ").forEach(function(e){e.length===i.removeNonCSSSymbolsFromStr(e).length&&n.classList.add(e)});return s(n)};
},{"./pure-functions":"iuWH"}],"TBFh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var d='\n<div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\n';exports.default=d;
},{}],"YK9s":[function(require,module,exports) {

},{}],"iVNX":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HideLoader=exports.ShowLoader=exports.LoaderInit=void 0;var n=require("../../utils/dom-abstraction"),o=i(require("./loader.tmpl"));require("./loader.scss");var a=function(){function t(){if(e(this,t),t.__instance)return t.__instance;this.$loader=n.$.create("div","loader"),this.$loader.html(o.default),t.__instance=this,this.init()}return r(t,[{key:"show",value:function(){this.$loader.addClass("show")}},{key:"hide",value:function(){this.$loader.removeClass("show")}},{key:"init",value:function(){return this.$title=n.$.create("span","loader_title"),this.$loader.append(this.$title),n.$("body").append(this.$loader),this}},{key:"setTitle",value:function(e){return this.$title.text(e),this}},{key:"remove",value:function(){this.hide(),this.$loader.remove()}}]),t}();function s(){return new a}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";return function(){(new a).setTitle(e).show()}}function l(){(new a).hide()}exports.LoaderInit=s,exports.ShowLoader=u,exports.HideLoader=l;
},{"../../utils/dom-abstraction":"eAIa","./loader.tmpl":"TBFh","./loader.scss":"YK9s"}],"tG4k":[function(require,module,exports) {
var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var o=new Uint8Array(16);module.exports=function(){return e(o),o}}else{var r=new Array(16);module.exports=function(){for(var e,o=0;o<16;o++)0==(3&o)&&(e=4294967296*Math.random()),r[o]=e>>>((3&o)<<3)&255;return r}}
},{}],"NxCc":[function(require,module,exports) {
for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);function t(o,t){var n=t||0,u=r;return[u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]]].join("")}module.exports=t;
},{}],"LOnp":[function(require,module,exports) {
var e,r,o=require("./lib/rng"),s=require("./lib/bytesToUuid"),i=0,n=0;function c(c,l,u){var v=l&&u||0,a=l||[],d=(c=c||{}).node||e,t=void 0!==c.clockseq?c.clockseq:r;if(null==d||null==t){var m=o();null==d&&(d=e=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==t&&(t=r=16383&(m[6]<<8|m[7]))}var q=void 0!==c.msecs?c.msecs:(new Date).getTime(),f=void 0!==c.nsecs?c.nsecs:n+1,b=q-i+(f-n)/1e4;if(b<0&&void 0===c.clockseq&&(t=t+1&16383),(b<0||q>i)&&void 0===c.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=q,n=f,r=t;var k=(1e4*(268435455&(q+=122192928e5))+f)%4294967296;a[v++]=k>>>24&255,a[v++]=k>>>16&255,a[v++]=k>>>8&255,a[v++]=255&k;var w=q/4294967296*1e4&268435455;a[v++]=w>>>8&255,a[v++]=255&w,a[v++]=w>>>24&15|16,a[v++]=w>>>16&255,a[v++]=t>>>8|128,a[v++]=255&t;for(var g=0;g<6;++g)a[v+g]=d[g];return l||s(a)}module.exports=c;
},{"./lib/rng":"tG4k","./lib/bytesToUuid":"NxCc"}],"A0Zv":[function(require,module,exports) {
var r=require("./lib/rng"),n=require("./lib/bytesToUuid");function e(e,i,u){var a=i&&u||0;"string"==typeof e&&(i="binary"===e?new Array(16):null,e=null);var l=(e=e||{}).random||(e.rng||r)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,i)for(var o=0;o<16;++o)i[a+o]=l[o];return i||n(l)}module.exports=e;
},{"./lib/rng":"tG4k","./lib/bytesToUuid":"NxCc"}],"e1H7":[function(require,module,exports) {
var e=require("./v1"),r=require("./v4"),v=r;v.v1=e,v.v4=r,module.exports=v;
},{"./v1":"LOnp","./v4":"A0Zv"}],"l2Zx":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEmmiter=void 0;var i=require("../utils/isEmpty"),r=function(){function n(){e(this,n),this.listeners={}}return t(n,[{key:"subscribe",value:function(e,n){return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(n),{unsubscribe:function(){this.listeners[e]=this.listeners[e].filter(function(e){return e!==n})}.bind(s())}}},{key:"emit",value:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return!!Array.isArray(this.listeners[e])&&(this.listeners[e].forEach(function(e){e.apply(void 0,t)}),!0)}},{key:"contains",value:function(e){return void 0!==this.listeners[e]}}]),n}();function s(){return r._instance&&!i.isEmpty(r._instance)||(r._instance=new r),r._instance}r._instance={},exports.getEmmiter=s;
},{"../utils/isEmpty":"QapI"}],"uNtu":[function(require,module,exports) {
"use strict";function e(e){return"string"==typeof e&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),e}function t(t){return Object.getOwnPropertyNames(t).reduce(function(r,c){return"string"==typeof t[c]?r[c]=e(t[c]):r[c]=t[c],r},{})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.specialcharsObject=exports.htmlspecialchars=void 0,exports.htmlspecialchars=e,exports.specialcharsObject=t;
},{}],"mYjJ":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplatorVariables=void 0;var r=require("uuid"),i=require("../../utils/pure-functions"),c=require("../../utils/htmlspecialchars"),l=function(){function n(e){t(this,n),this.template=e,this.TEMPLATE_REGEXP=/\{\{(.*?)\}\}/i}return o(n,[{key:"compile",value:function(e){return this._compileTemplate(e)}},{key:"_compileTemplate",value:function(t){for(var n=this.template,o=this.TEMPLATE_REGEXP,l=null;l=o.exec(n);)if(l[1]){var u=l[1].trim(),a=i.get(t,u);if(void 0===a){n=n.replace(new RegExp(l[0],"gi"),"");continue}if("function"==typeof a){var p="_".concat(r.v4());window[u+p]="value",n=n.replace(new RegExp(l[0],"gi"),"window.".concat(l[1].trim()).concat(p,"()"));continue}if("object"===e(a)){n=n.replace(new RegExp(l[0],"gi"),JSON.stringify(a,null,2));continue}n=n.replace(new RegExp(l[0],"gi"),c.htmlspecialchars(a))}return n}}]),n}();exports.TemplatorVariables=l;
},{"uuid":"e1H7","../../utils/pure-functions":"iuWH","../../utils/htmlspecialchars":"uNtu"}],"imYY":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var u=t[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function u(e,t,u){return t&&r(e.prototype,t),u&&r(e,u),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplatorFor=void 0;var o=require("./templator-variables"),n=require("../../utils/pure-functions"),i=function(){function r(e){t(this,r),this.template=e,this.TEMPLATE_REGEXP=/<v\x2Dfor[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(:([\s\S]*?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*:([\s\S]*?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]in[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]([\s\S]*?))>([\s\S]*?)<\/v\x2Dfor>/gi}return u(r,[{key:"compile",value:function(e){return this._compileTemplate(e)}},{key:"_compileTemplate",value:function(t){for(var r=this,u=this.TEMPLATE_REGEXP,i=this.template,a="",c=null,l=function(){var u=c[2].trim(),l=c[3].trim(),p=n.get(t,c[4].trim(),[]),f=c[5],s=new o.TemplatorVariables(f);Array.isArray(p)?p.forEach(function(e,t){var o=r.createContext(l,t,u,e),n=s.compile(o);a+=n}):"object"===e(p)&&Object.getOwnPropertyNames(p).forEach(function(e){var t=r.createContext(l,e,u,p[e]),o=s.compile(t);a+=o}),i=i.replace(new RegExp(r.escapeRegExp(c[0]),"gis"),a)};c=u.exec(i);)l();return i}},{key:"createContext",value:function(e,t,r,u){var o={};return o[e]=t,o[r]=u,o}},{key:"escapeRegExp",value:function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}}]),r}();exports.TemplatorFor=i;
},{"./templator-variables":"mYjJ","../../utils/pure-functions":"iuWH"}],"KKWG":[function(require,module,exports) {
"use strict";function e(e){return o(e)||n(e)||t(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(e,r){if(e){if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0}}function n(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function o(e){if(Array.isArray(e))return a(e)}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,r,t){return r&&u(e.prototype,r),t&&u(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapCompiler=void 0;var f=function(){function r(e){i(this,r),this.map=e}return c(r,[{key:"combineMap",value:function(){for(var r=[];this.map.size>1;)for(var t=e(this.map.entries()),n=0;n<t.length-1;n++)if("open"===t[n][1]&&"close"===t[n+1][1]){var o=t[n][0],a=t[n+1][0];r.push([o,a]),this.map.delete(o),this.map.delete(a);break}return r}}]),r}();exports.MapCompiler=f;
},{}],"jO9M":[function(require,module,exports) {
"use strict";function e(e){return i(e)||n(e)||r(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function n(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function i(e){if(Array.isArray(e))return o(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TagsMapBuilder=void 0;var l=function(){function t(e,r,n){s(this,t),this.highstack=e,this.close=n,this.result=new Map,this.OPEN_REGEXP=new RegExp(r,"g"),this.CLOSE_REGEXP=new RegExp(n,"g")}return u(t,[{key:"build",value:function(){return this._buildOpen(),this._buildClose(),new Map(e(this.result.entries()).sort(function(e,t){return e[0]-t[0]}))}},{key:"_buildOpen",value:function(){for(var e;e=this.OPEN_REGEXP.exec(this.highstack);)this.result.set(e.index,"open")}},{key:"_buildClose",value:function(){for(var e=null;e=this.CLOSE_REGEXP.exec(this.highstack);)this.result.set(e.index+this.close.length,"close")}}]),t}();exports.TagsMapBuilder=l;
},{}],"wERs":[function(require,module,exports) {
"use strict";function e(e,r,t){switch(r){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t;case"==":return e==t;case"!=":return e!=t;case"===":return e===t;case"!==":return e!==t;case"&&":return e&&t;case"||":return e||t;case"!":return!e;case null:case void 0:return e;default:return!1}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compare=void 0,exports.compare=e;
},{}],"hKe5":[function(require,module,exports) {
"use strict";function e(e,n){return o(e)||i(e,n)||r(e,n)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){i=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}}function o(e){if(Array.isArray(e))return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplatorIf=void 0;var c=require("../../utils/pure-functions"),s=require("./map-compiler"),p=require("./tags-map-builder"),f=require("../../utils/compare"),m=function(){function t(e){a(this,t),this.template=e,this.TEMPLATE_REGEXP=/<v\x2Dif(="([\s\S]*?)")>([\s\S]*?)(<v\x2Delse>([\s\S]*?))?<\/v\x2Dif>/gi,this.COMPARE_REGEXP=/!?([\w.]+)((.*?)('?!?[\w.]+'?))?/}return u(t,[{key:"compile",value:function(e){var r=this,n=new p.TagsMapBuilder(this.template,'<v-if(="(.*?)")>',"</v-if>").build(),i=new s.MapCompiler(n).combineMap();return i.map(function(e){return r.template.slice(e[0],e[1])}).forEach(function(n){var i=new t(n)._compileAtoms(e);r.template=r.template.replace(new RegExp(r.escapeRegExp(n),"gi"),i)}),this._compileAtoms(e)}},{key:"_compileAtoms",value:function(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.TEMPLATE_REGEXP,i=null!=r?r:this.template,o=i,a=null;a=n.exec(i);){var l=a[2].trim(),u=a[3].trim(),s=c.isUndefined(a[5])?"":a[5].trim(),p=e(this._parseCondition(l),3),m=p[0],v=p[1],d=p[2],g=void 0;if(g="!"!==m.charAt(0)?c.get(t,m):!c.get(t,m.slice(1)),c.isUndefined(g))o=o.replace(new RegExp(a[0],"gi"),s.trim());else{var h=void 0;h=c.isUndefined(d)?d:"!"!==d.charAt(0)?c.get(t,d,d):!c.get(t,d.slice(1),d.slice(1)),g="null"===g?null:g,o=f.compare(g,v,h)?o.replace(new RegExp(this.escapeRegExp(a[0]),"gi"),u.trim()):o.replace(new RegExp(this.escapeRegExp(a[0]),"gi"),s.trim())}}return o}},{key:"_parseCondition",value:function(e){var t=this.COMPARE_REGEXP.exec(e);if(t&&!c.isUndefined(t[3])){var r=c.trimQuotes(t[1]),n=c.trimQuotes(t[4]);return[r,t[3].trim(),n]}return[c.trimQuotes(e)]}},{key:"escapeRegExp",value:function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}}]),t}();exports.TemplatorIf=m;
},{"../../utils/pure-functions":"iuWH","./map-compiler":"KKWG","./tags-map-builder":"jO9M","../../utils/compare":"wERs"}],"HQKG":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Templator=void 0;var a=require("./templator-for"),o=require("./templator-if"),i=require("./templator-variables"),l=function(){function t(r){e(this,t),this.template=r}return r(t,[{key:"compile",value:function(e){var t=new a.TemplatorFor(this.template);this.template=t.compile(e);var r=new o.TemplatorIf(this.template);this.template=r.compile(e);var l=new i.TemplatorVariables(this.template);return this.template=l.compile(e),this.template}}]),t}();exports.Templator=l;
},{"./templator-for":"imYY","./templator-if":"hKe5","./templator-variables":"mYjJ"}],"zrp5":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplatorProps=void 0;var n=require("../../utils/pure-functions"),o=function(){function t(r){e(this,t),this.template=r,this.TEMPLATE_REGEXP=/bind:([0-9A-Z_a-z]+)="([\.0-9A-Z_a-z]+[\+0-9A-\[\]_a-z]*?)"/gi}return r(t,[{key:"compile",value:function(e){return this._compileTemplate(e)}},{key:"_compileTemplate",value:function(e){for(var t=this.TEMPLATE_REGEXP,r=this.template,o=null,i={};o=t.exec(r);){var a=n.get(e,o[2],o[2]);i[o[1]]=a}return i}}]),t}();exports.TemplatorProps=o;
},{"../../utils/pure-functions":"iuWH"}],"nVJL":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComponentDOMListener=void 0;var o=require("../utils/pure-functions"),i=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t(this,e),this.listeners=n,this.name=""}return n(e,[{key:"addSingleListener",value:function(t,e){var n="".concat(t,"_").concat(this.id);this.methods[n]=e.bind(this),this.$root.on(t,this.methods[n])}},{key:"initDOMListeners",value:function(){var t=this;this.checkRoot(),this.listeners.forEach(function(e){var n=r(e);if(!t.methods[n])throw new Error("Method ".concat(n," is not implemented: ").concat(t.name," Component"));var o="".concat(n,"_").concat(t.id);t.methods[o]=t.methods[n].bind(t);var i=["focus","blur"].includes(e);t.$root.on(e,t.methods[o],i)})}},{key:"removeDOMListeners",value:function(){var t=this;this.checkRoot(),this.listeners.forEach(function(e){var n=r(e),o="".concat(n,"_").concat(t.id);t.$root.off(e,t.methods[o])})}},{key:"checkRoot",value:function(){if(!this.$root)throw new Error("Property '$root' is not defined in ".concat(this.name," Component"))}}]),e}();function r(t){return"on".concat(o.capitalize(t))}exports.ComponentDOMListener=i;
},{"../utils/pure-functions":"iuWH"}],"Bm1c":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=f();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?s(e):r}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComponentStoreSubscriber=void 0;var a=require("../utils/pure-functions"),p=require("./ComponentDOMListener"),b=require("./store/Store"),y=function(t){o(i,p.ComponentDOMListener);var r=u(i);function i(t){var n,o;return e(this,i),(n=r.call(this,t.listeners)).store=b.Store.get(),n.storeSubscriptions=[],n.storeSubscribers=null!==(o=t.storeSubscribers)&&void 0!==o?o:{},n}return n(i,[{key:"initStoreSubscribers",value:function(){var t=this,e=this.store.subscribe(function(e,r){Object.keys(e).forEach(function(n){var o;if(!a.isEqual(t.store.prevState[n],e[n])&&t.isWatching(n)){var i=e[n];null===(o=t.storeSubscribers[n])||void 0===o||o.call(t,i,r)}})});this.storeSubscriptions.push(e)}},{key:"isWatching",value:function(t){return!!this.storeSubscribers[t]}},{key:"unsubscribeStoreSubscriptioins",value:function(){this.storeSubscriptions.forEach(function(t){return t.unsubscribe()}),this.storeSubscriptions=[]}},{key:"$dispatch",value:function(t){var e;null===(e=this.store)||void 0===e||e.dispatch(t)}}]),i}();exports.ComponentStoreSubscriber=y;
},{"../utils/pure-functions":"iuWH","./ComponentDOMListener":"nVJL","./store/Store":"RuC9"}],"UAVj":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplatorReverse=void 0;var a=require("./templator-for"),o=require("./templator-if"),i=require("./templator-variables"),l=function(){function t(r){e(this,t),this.template=r}return r(t,[{key:"compile",value:function(e){var t=new o.TemplatorIf(this.template);this.template=t.compile(e);var r=new a.TemplatorFor(this.template);this.template=r.compile(e);var l=new i.TemplatorVariables(this.template);return this.template=l.compile(e),this.template}}]),t}();exports.TemplatorReverse=l;
},{"./templator-for":"imYY","./templator-if":"hKe5","./templator-variables":"mYjJ"}],"Gxci":[function(require,module,exports) {
"use strict";function t(t){return i(t)||r(t)||n(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function r(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function i(t){if(Array.isArray(t))return o(t)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var n,r=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?m(t):e}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Component=void 0;var E=require("uuid"),v=require("../utils/dom-abstraction"),d=require("./Emmiter"),S=require("./templators/templator"),T=require("./templators/templator-props"),O=require("../utils/pure-functions"),g=require("../utils/isEmpty"),$=require("./ComponentStoreSubscriber"),k=require("./templators/templator-reverse"),C=function(e){l(r,$.ComponentStoreSubscriber);var n=p(r);function r(t,e){var i,o,s,a,c,l,f,p,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(u(this,r),(i=n.call(this,t)).$targetEl=e,i.parentComponent=h,i.emmiter=d.getEmmiter(),i.emmiterSubscriptions=[],i.components=[],i.componentsInst=[],i.template="",i.subscribers={},i.id=E.v4(),i.methods={},i.templatorReverse=!1,g.isEmpty(t))throw new Error("No options in Component");if(!t.name)throw new Error("No name defined in Component");for(var b=arguments.length,y=new Array(b>3?b-3:0),v=3;v<b;v++)y[v-3]=arguments[v];return Object.assign.apply(Object,[t].concat(y)),Object.assign.apply(Object,[m(i)].concat(y)),i.name=null!==(o=t.name)&&void 0!==o?o:r.name,i.components=null!==(s=t.components)&&void 0!==s?s:[],i.template=null!==(a=t.template)&&void 0!==a?a:"",i.props=null!==(c=t.props)&&void 0!==c?c:{},i.models=null!==(l=t.models)&&void 0!==l?l:[],i.subscribers=null!==(f=t.subscribers)&&void 0!==f?f:{},i.templatorReverse=null!==(p=t.templatorReverse)&&void 0!==p&&p,i.initMethods(t),i.prepare(),i}return c(r,[{key:"initMethods",value:function(t){var e=this;t.methods&&(this.methods=t.methods,Object.getOwnPropertyNames(this.methods).forEach(function(t){Object.defineProperty(e,t,{configurable:!1,writable:!1,value:e.methods[t].bind(e)})})),["beforePrepare","beforeCreate","beforeInitChildren","beforeMount","beforeInit","afterInit","beforeUpdate","beforeDestroy"].forEach(function(n){t[n]&&Object.defineProperty(e,n,{configurable:!1,writable:!1,value:t[n].bind(e)})})}},{key:"beforePrepare",value:function(){}},{key:"prepare",value:function(){this.getPropsFromTemplate(),this.beforePrepare(),this.initSubscribers(),this.initStoreSubscribers(),this.initEventsNames(),this.initLifeCycleEvents(),this.$emit(this.EVENTS.BEFORE_CREATE)}},{key:"getPropsFromTemplate",value:function(){if(this.$targetEl&&this.parentComponent&&!g.isEmpty(this.parentComponent))if(O.get(this.parentComponent,"props",!1)){var t=new T.TemplatorProps(this.$targetEl.html()).compile(this.parentComponent.props);this.props=Object.assign(Object.assign({},this.props),this.makePropsProxy(t))}else this.props={}}},{key:"makePropsProxy",value:function(t){var e=this,n={};return Object.getOwnPropertyNames(t).forEach(function(r){if(e.parentComponent&&"object"===s(t[r])){var i=new Proxy(t[r],{get:function(t,e){return t[e]},set:function(t,e,n){return t[e]=n,!0}});n[r]=i}else n[r]=t[r]}),n}},{key:"initEventsNames",value:function(){var t=this.emmiter.contains("".concat(this.name,":beforeCreate"))?"".concat(this.name,"_").concat(this.id):this.name;this.EVENTS={BEFORE_CREATE:"".concat(t,":beforeCreate"),BEFORE_MOUNT:"".concat(t,":beforeMount"),BEFORE_INIT:"".concat(t,":beforeInit"),AFTER_INIT:"".concat(t,":afterInit"),UPDATE:"".concat(t,":update"),DESTROY:"".concat(t,":destroy")}}},{key:"initLifeCycleEvents",value:function(){this.$on(this.EVENTS.BEFORE_CREATE,this._beforeCreate.bind(this)),this.$on(this.EVENTS.BEFORE_MOUNT,this._beforeMount.bind(this)),this.$on(this.EVENTS.BEFORE_INIT,this._beforeInit.bind(this)),this.$on(this.EVENTS.AFTER_INIT,this._afterInit.bind(this)),this.$on(this.EVENTS.UPDATE,this._update.bind(this)),this.$on(this.EVENTS.DESTROY,this._destroy.bind(this))}},{key:"beforeCreate",value:function(){}},{key:"beforeInitChildren",value:function(){}},{key:"_beforeCreate",value:function(){this.beforeCreate(),this.initRoot(),this.bindModels(),this.beforeInitChildren(),this.initChildren(),this.$emit(this.EVENTS.BEFORE_MOUNT)}},{key:"bindModels",value:function(){var e=this;this.models&&this.models.forEach(function(n){var r=t(e.$root.findAll('[model="'.concat(n,'"]'))),i="";Object.defineProperty(e.props,n,{configurable:!0,get:function(){return i},set:function(t){i=t,r.forEach(function(e){"INPUT"===e.tagName?e.value=t:e.textContent=i})}}),e.$root.findAll('input[model="'.concat(n,'"]')),e.addSingleListener("keyup",function(t){e.props[n]=t.target.value})})}},{key:"initRoot",value:function(){var t=this.compileTemplate(this.template);this.$root=this.buildDomAbstraction(t)}},{key:"compileTemplate",value:function(t){if(g.isEmpty(t.trim()))return"";var e=this.props;return(this.templatorReverse?new k.TemplatorReverse(t):new S.Templator(t)).compile(e).trim()}},{key:"buildDomAbstraction",value:function(t){return v.$.create("template").html(t).firstChild()}},{key:"initChildren",value:function(){var t=this;this.components.forEach(function(e){t.findAllTags(e.name).forEach(function(n){var i=new r(e,n,t);t.componentsInst.push(i)})})}},{key:"findAllTags",value:function(t){return this.$root.findAll(t).map(function(t){return v.$(t)})}},{key:"beforeMount",value:function(){}},{key:"_beforeMount",value:function(){var t,e;this.beforeMount(),this.$root.isEmpty()?null===(e=this.$targetEl)||void 0===e||e.remove():null===(t=this.$targetEl)||void 0===t||t.parent().replaceChild(this.$root,this.$targetEl),this.$emit(this.EVENTS.BEFORE_INIT)}},{key:"beforeInit",value:function(){}},{key:"_beforeInit",value:function(){this.beforeInit(),this.initDOMListeners(),this.$emit(this.EVENTS.AFTER_INIT)}},{key:"initSubscribers",value:function(){var t=this;Object.getOwnPropertyNames(this.subscribers).forEach(function(e){t.subscribers&&t.$on(e,t.subscribers[e].bind(t))})}},{key:"unsubscribeSubscribers",value:function(){this.emmiterSubscriptions.forEach(function(t){return t.unsubscribe()}),this.emmiterSubscriptions=[]}},{key:"afterInit",value:function(){}},{key:"_afterInit",value:function(){this.afterInit()}},{key:"beforeUpdate",value:function(){}},{key:"_update",value:function(){this.beforeUpdate(),this.reBuild()}},{key:"beforeDestroy",value:function(){}},{key:"_destroy",value:function(){this.beforeDestroy(),this.removeDOMListeners(),this.unsubscribeSubscribers(),this.unsubscribeStoreSubscriptioins(),this.componentsInst.forEach(function(t){t.$emit(t.EVENTS.DESTROY)}),this.componentsInst=[]}},{key:"reBuild",value:function(){this.$targetEl=this.$root,this.$emit(this.EVENTS.DESTROY),this.initSubscribers(),this.initStoreSubscribers(),this.initLifeCycleEvents(),this.$emit(this.EVENTS.BEFORE_CREATE)}},{key:"$emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.emmiter).emit.apply(e,[t].concat(r))}},{key:"$on",value:function(t,e){var n=this.emmiter.subscribe(t,e);this.emmiterSubscriptions.push(n)}},{key:"$show",value:function(){this.$root.css({opacity:1})}},{key:"$hide",value:function(){this.$root.css({opacity:0})}},{key:"$remove",value:function(){this.$emit(this.EVENTS.DESTROY),this.$root.remove()}}]),r}();exports.Component=C;
},{"uuid":"e1H7","../utils/dom-abstraction":"eAIa","./Emmiter":"l2Zx","./templators/templator":"HQKG","./templators/templator-props":"zrp5","../utils/pure-functions":"iuWH","../utils/isEmpty":"QapI","./ComponentStoreSubscriber":"Bm1c","./templators/templator-reverse":"UAVj"}],"Es13":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=l();return function(){var n,o=s(t);if(e){var r=s(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?f(e):n}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageComponent=void 0;var a=require("./Component"),p=function(t){r(i,a.Component);var n=u(i);function i(){return e(this,i),n.apply(this,arguments)}return o(i,[{key:"getRoot",value:function(){return this.$root}},{key:"afterRender",value:function(){this.$emit(this.EVENTS.BEFORE_INIT)}},{key:"destroy",value:function(){this.$emit(this.EVENTS.DESTROY)}},{key:"_beforeCreate",value:function(){this.beforeCreate(),this.initRoot(),this.bindModels(),this.beforeInitChildren(),this.initChildren()}}]),i}();exports.PageComponent=p;
},{"./Component":"Gxci"}],"QWtW":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Route=void 0;var o=require("../PageComponent"),a=function(){function t(n,o){e(this,t),this.pathname=n,this.options=o,this.page=null}return n(t,[{key:"leave",value:function(){this.page&&this.page.destroy()}},{key:"match",value:function(e){return e===this.pathname}},{key:"render",value:function(e){this.page=new o.PageComponent(this.options),e.append(this.page.getRoot()),this.page.afterRender()}}]),t}();exports.Route=a;
},{"../PageComponent":"Es13"}],"uA50":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Router=void 0;var r=require("../../utils/dom-abstraction"),i=require("../../utils/isEmpty"),a=require("../../utils/pure-functions"),u=require("../loader/loader"),o=require("../store/Store"),s=require("./Route"),c=function(){function t(){if(e(this,t),this.routes=new Map,this.history=window.history,t.__instance)return t.__instance;this.changePageHandler=this.changePageHandler.bind(this),t.__instance=this}return n(t,[{key:"init",value:function(e){var t=this;this.$placeholder=r.$(e),window.addEventListener("popstate",function(e){t.changePageHandler(e.target.location.pathname)});var n=window.location.pathname;this.isAuthRedirect(n)||(this.changePageHandler(window.location.pathname),u.LoaderInit())}},{key:"isAuthRedirect",value:function(e){var n=["signin","signup"],r=o.Store.get().getState().session,a=this.getRouteName(e);if(!i.isEmpty(r)||(null==r?void 0:r.login)){if(n.includes(a))return t.navigate("chats"),!0}else if(!n.includes(a))return t.navigate("signin"),!0;return"/"===e&&(t.navigate("chats"),!0)}},{key:"changePageHandler",value:function(e){var t=this.getRoute(e);t||(t=this.getRoute("404")),this.currentRoute&&(this.currentRoute.leave(),this.$placeholder.html("")),this.currentRoute=t,t.render(this.$placeholder)}},{key:"use",value:function(e,t){return"/"!==e.charAt(0)&&(e="/".concat(e)),this.routes.set(e,new s.Route(e,t)),this}},{key:"back",value:function(){return this.history.back(),!1}},{key:"forward",value:function(){return this.history.forward(),!1}},{key:"destroy",value:function(){this.currentRoute&&this.currentRoute.leave(),this.$placeholder.off("popstate",this.changePageHandler)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"/"!==e.charAt(0)&&(e="/".concat(e)),t&&(e="".concat(e,"/").concat(t)),this.history.pushState({},"","".concat(e)),this.changePageHandler(e),!1}},{key:"getRoute",value:function(e){var t=this.getRouteName(e);return this.routes.get("/".concat(t))}},{key:"getCurrentRoute",value:function(){return this.currentRoute}},{key:"getRouteName",value:function(e){return a.trim(e,"/").split("/")[0]}}],[{key:"getRouter",value:function(){return new t}},{key:"navigate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.getRouter().navigate(e,n)}},{key:"back",value:function(){t.getRouter().back()}},{key:"forward",value:function(){t.getRouter().forward()}}]),t}();exports.Router=c,c.__instance=null;
},{"../../utils/dom-abstraction":"eAIa","../../utils/isEmpty":"QapI","../../utils/pure-functions":"iuWH","../loader/loader":"iVNX","../store/Store":"RuC9","./Route":"QWtW"}],"E5Hx":[function(require,module,exports) {

},{"./../webfonts/fa-brands-400.eot":[["fa-brands-400.e5cf17a2.eot","J74V"],"J74V"],"./../webfonts/fa-brands-400.woff2":[["fa-brands-400.fa2b50eb.woff2","dRMv"],"dRMv"],"./../webfonts/fa-brands-400.woff":[["fa-brands-400.76d38564.woff","MuKX"],"MuKX"],"./../webfonts/fa-brands-400.ttf":[["fa-brands-400.d8d82559.ttf","itMQ"],"itMQ"],"./../webfonts/fa-brands-400.svg":[["fa-brands-400.4d16fbfe.svg","nFkf"],"nFkf"],"./../webfonts/fa-regular-400.eot":[["fa-regular-400.b8524921.eot","QloG"],"QloG"],"./../webfonts/fa-regular-400.woff2":[["fa-regular-400.1f18e0a2.woff2","QpDK"],"QpDK"],"./../webfonts/fa-regular-400.woff":[["fa-regular-400.d7f209fa.woff","FkCR"],"FkCR"],"./../webfonts/fa-regular-400.ttf":[["fa-regular-400.da848ba3.ttf","pqlw"],"pqlw"],"./../webfonts/fa-regular-400.svg":[["fa-regular-400.2be1b64f.svg","JQYb"],"JQYb"],"./../webfonts/fa-solid-900.eot":[["fa-solid-900.4fe5d922.eot","j7If"],"j7If"],"./../webfonts/fa-solid-900.woff2":[["fa-solid-900.effee26e.woff2","Z6Al"],"Z6Al"],"./../webfonts/fa-solid-900.woff":[["fa-solid-900.187d4d4b.woff","nggD"],"nggD"],"./../webfonts/fa-solid-900.ttf":[["fa-solid-900.a633dba1.ttf","RAlu"],"RAlu"],"./../webfonts/fa-solid-900.svg":[["fa-solid-900.102f442e.svg","c9IH"],"c9IH"]}],"RHFU":[function(require,module,exports) {

},{"@fortawesome/fontawesome-free/css/all.min.css":"E5Hx"}],"md1S":[function(require,module,exports) {
module.exports="/unknown_avatar.7cb27457.png";
},{}],"JCFy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r='\n   <div class="avatar__wrapper">\n   <img \n   <v-if="id">id=\'{{id}}\'</v-if>\n   src="{{avatar}}"\n   class="user__avatar <v-if="css">{{css}}</v-if> "\n   alt="{{alt}}"\n   style="border-color: {{borderColor}}"\n   >\n   </div>\n';exports.default=r;
},{}],"oRiH":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseAPI=void 0;var r=function(){function t(){e(this,t),this.basehost="https://ya-praktikum.tech/api/v2"}return n(t,[{key:"getBaseHost",value:function(){return this.basehost}},{key:"getResourceURL",value:function(e){return e=e.startsWith("/")?e:"/".concat(e),"".concat(this.basehost,"/resources").concat(e)}}]),t}();exports.BaseAPI=r;
},{}],"qI6Q":[function(require,module,exports) {
"use strict";var r=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Avatar=void 0,require("./Avatar.scss");var e=r(require("../../../assets/unknown_avatar.png")),t=require("../../../utils/pure-functions"),s=r(require("./Avatar.tmpl")),a=require("../../../core/xhr/BaseApi");exports.Avatar={name:"Avatar",template:s.default,components:[],props:{user:{},borderColor:""},listeners:[],subscribers:{},methods:{},beforePrepare:function(){var r=this.props.user.avatar,t="";t=r?r.startsWith("/")?(new a.BaseAPI).getResourceURL(r):r:e.default,this.props.avatar=t},beforeCreate:function(){if(!this.props.user)throw new Error("Avatar: User is not implemented");this.props.borderColor=t.strToColor(this.props.user.avatar)}};
},{"./Avatar.scss":"YK9s","../../../assets/unknown_avatar.png":"md1S","../../../utils/pure-functions":"iuWH","./Avatar.tmpl":"JCFy","../../../core/xhr/BaseApi":"oRiH"}],"b8Hz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s='\n    <div class="account__wrapper">\n      <div class="user__wrapper account__user">\n         <Avatar bind:user="account"></Avatar>\n         <div class="user__info">\n            <span class="user__displayname">{{account.display_name}}</span>\n         </div>\n         <div class="user__actions">\n            <button type="button" class="button button__user_settings button_empty_primary" data-action="settings">\n            <i class="fas fa-cog"></i>\n            </button>\n         </div>\n      </div>\n    </div>\n';exports.default=s;
},{}],"WKkM":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RightSidebarViews=void 0,function(e){e.InfoAccount="InfoAccount",e.InfoUser="InfoUser",e.InfoChat="InfoChat",e.FormChangeAvatar="FormChangeAvatar",e.FormChangeChatAvatar="FormChangeChatAvatar",e.FormAccountSettings="FormAccountSettings",e.FormPasswordChange="FormPasswordChange"}(e=exports.RightSidebarViews||(exports.RightSidebarViews={}));
},{}],"YskN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../../controllers/RightSidebar/RightSidebarViews"),n='\n<section class="info__section">\n   <div class="info__content">\n   <h3>Account Info</h3>\n   <Avatar bind:user="user" bind:css="avatar__info"></Avatar>\n   <h4 class="info__username">{{user.first_name}} {{user.second_name}}</h4>\n   <span class="info__displayname">{{user.display_name}}</span>\n   </div>\n   <div class="info__actions">\n   <button type="button" class="button info__button button_outline_primary" data-view="'.concat(t.RightSidebarViews.FormChangeAvatar,'">Change Avatar</button>\n   <button type="button" class="button info__button button_outline_primary" data-view="').concat(t.RightSidebarViews.FormAccountSettings,'">Account Settings</button>\n   <button type="button" class="button info__button button_outline_primary" data-view="').concat(t.RightSidebarViews.FormPasswordChange,'">Change Password</button>\n   <button type="button" class="button info__button button_outline_danger" data-action="logout">Log Out <i class="fas fa-sign-out-alt"></i></button>\n   </div>\n</section>\n');exports.default=n;
},{"../../../controllers/RightSidebar/RightSidebarViews":"WKkM"}],"VNWQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logout=exports.saveUsers=exports.updateChetMessages=exports.saveMessenger=exports.saveToken=exports.uploadChats=exports.selectChat=exports.setSession=exports.accountPasswordChange=exports.accountSettingsUpdate=exports.leftSidebar=exports.rightSidebar=void 0;var t=require("./actionTypes");function e(e){return{type:t.Actions.RIGHTSIDEBAR_CHANGE_VIEW,data:e}}function s(e){return{type:t.Actions.LEFTSIDEBAR_CHANGE_VIEW,data:e}}function o(e){return{type:t.Actions.ACCOUNT_SETTINGS_UPDATE,data:e}}function n(e){return{type:t.Actions.ACCOUNT_PASSWORD_CHANGE,data:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?{type:t.Actions.AUTH_SIGN_IN,data:null==e?void 0:e.login}:{type:t.Actions.AUTH_LOGOUT}}function a(e){return{type:t.Actions.SELECTED_CHAT_CHANGE,data:e}}function p(e){return{type:t.Actions.CHATS_UPLOAD_CHATS,data:e}}function i(e,s){return{type:t.Actions.TOKENS_SAVE,data:{chatId:e,token:s}}}function c(e,s){return{type:t.Actions.MESSENGER_SAVE,data:{chatId:e,messages:s}}}function u(e,s){return{type:t.Actions.MESSENGER_UPDATE_CHAT,data:{chatId:e,messages:s}}}function A(e){var s=e.reduce(function(t,e){return t[e.id]=e,t},{});return{type:t.Actions.USERS_SAVE,data:s}}function d(){return{type:t.Actions.AUTH_LOGOUT}}exports.rightSidebar=e,exports.leftSidebar=s,exports.accountSettingsUpdate=o,exports.accountPasswordChange=n,exports.setSession=r,exports.selectChat=a,exports.uploadChats=p,exports.saveToken=i,exports.saveMessenger=c,exports.updateChetMessages=u,exports.saveUsers=A,exports.logout=d;
},{"./actionTypes":"ce8K"}],"t817":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.notifyError=exports.notify=exports.NoticeStatus=void 0;var r,n=require("../../utils/dom-abstraction");require("./notify.scss"),function(t){t.SUCCESS="success",t.ERROR="danger",t.WARNING="warning"}(r=exports.NoticeStatus||(exports.NoticeStatus={}));var o=function(){function e(i,r,n){t(this,e),this.text=i,this.status=r,this.delay=n,this.init()}return i(e,[{key:"init",value:function(){return this.$wrapper=n.$.create("div","notice ".concat(this.status)).append(n.$.create("span","notice_text").text(this.text)),n.$("body").append(this.$wrapper),this.hide=this.hide.bind(this),this.$wrapper.on("click",this.hide),this}},{key:"show",value:function(){var t=this;return setTimeout(function(){t.$wrapper.addClass("show"),setTimeout(function(){t.hide()},t.delay)},200),this}},{key:"hide",value:function(){var t=this;this.$wrapper.removeClass("show"),setTimeout(function(){t.destroy()},200)}},{key:"destroy",value:function(){this.$wrapper.off("click",this.hide),this.$wrapper.remove()}}]),e}();function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.SUCCESS,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return new o(t,e,i).show()}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return s(t,r.ERROR,e)}exports.notify=s,exports.notifyError=a;
},{"../../utils/dom-abstraction":"eAIa","./notify.scss":"YK9s"}],"AWbh":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}var o;function r(e){if(0===Object.getOwnPropertyNames(e).length)return"";return"?".concat(Object.getOwnPropertyNames(e).map(function(t){var n=Array.isArray(e[t])?e[t].join(","):e[t];return"".concat(t,"=").concat(n)}).join("&"))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.XHR=exports.METHOD=void 0,function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE"}(o=exports.METHOD||(exports.METHOD={}));var s=function(){function t(){e(this,t)}return n(t,null,[{key:"request",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r=t.method,s=void 0===r?o.GET:r,a=t.data,i=t.headers;return new Promise(function(r,u){var c,l=new XMLHttpRequest;l.open(s,e),l.responseType=null!==(c=t.responseType)&&void 0!==c?c:"json",t.withCredentials&&(l.withCredentials=t.withCredentials),l.onload=function(){l.status>=400?u(l.response):r(l.response)},l.onabort=u,l.onerror=u,l.ontimeout=u,l.onloadstart=function(){t.beforeRequest&&t.beforeRequest()},l.onprogress=function(e){t.onProgress&&t.onProgress(e)},l.upload.onprogress=function(e){t.onUploadProgress&&t.onUploadProgress(e)},i&&Object.getOwnPropertyNames(i).forEach(function(e){l.setRequestHeader(e,i[e])}),l.timeout=n,s!==o.GET&&a?a instanceof FormData?l.send(a):(l.setRequestHeader("Content-Type","application/json; charset=utf-8"),l.send(JSON.stringify(a))):l.send()})}},{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=n.data?e+r(n.data):e,t.request(e,Object.assign(Object.assign({},n),{method:o.GET}),n.timeout)}},{key:"post",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request(e,Object.assign(Object.assign({},n),{method:o.POST}),n.timeout)}},{key:"put",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request(e,Object.assign(Object.assign({},n),{method:o.PUT}),n.timeout)}},{key:"delete",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request(e,Object.assign(Object.assign({},n),{method:o.DELETE}),n.timeout)}}]),t}();exports.XHR=s;
},{}],"iTWT":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=a();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?s(e):n}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthAPI=void 0;var l=require("../loader/loader"),y=require("../notify/notify"),p=require("./BaseApi"),h=require("./XHR"),b=function(t){o(u,p.BaseAPI);var n=i(u);function u(){var t;return e(this,u),(t=n.apply(this,arguments)).host="".concat(t.basehost,"/auth"),t}return r(u,[{key:"login",value:function(t){return t=Object.assign(Object.assign(Object.assign({},t),{withCredentials:!0}),{beforeRequest:l.ShowLoader()}),h.XHR.post("".concat(this.host,"/signin"),t).then(function(){return{status:"success"}}).catch(function(t){return"User already in system"===t.reason?{status:"success"}:(y.notifyError(t.reason),{status:"failed"})}).finally(function(){l.HideLoader()})}},{key:"logout",value:function(){return h.XHR.post("".concat(this.host,"/logout"),{withCredentials:!0}).then(function(){return{status:"success"}}).catch(function(t){return y.notifyError(t.reason),{status:"failed"}}).finally(function(){l.HideLoader()})}},{key:"register",value:function(t){return t=Object.assign(Object.assign({},t),{withCredentials:!0}),h.XHR.post("".concat(this.host,"/signup"),t).then(function(){return{status:"success"}}).catch(function(t){return y.notifyError(t.reason),{status:"failed"}}).finally(function(){l.HideLoader()})}},{key:"account",value:function(){var t={withCredentials:!0,beforeRequest:l.ShowLoader()};return h.XHR.get("".concat(this.host,"/user"),t).then(function(t){return{status:"success",data:t}}).catch(function(t){return y.notifyError(t.reason),{status:"failed"}}).finally(function(){l.HideLoader()})}}]),u}();exports.AuthAPI=b;
},{"../loader/loader":"iVNX","../notify/notify":"t817","./BaseApi":"oRiH","./XHR":"AWbh"}],"ODHw":[function(require,module,exports) {
"use strict";function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSameUsers=exports.User=void 0;var i=function i(s){var n,t;e(this,i),this.id=s.id,this.first_name=s.first_name,this.second_name=s.second_name,this.display_name=null!==(n=s.display_name)&&void 0!==n?n:s.login,this.login=s.login,this.email=s.email,this.phone=s.phone,this.avatar=s.avatar,this.role=null!==(t=s.role)&&void 0!==t?t:null};function s(e,i){return e.id===i.id}exports.User=i,exports.isSameUsers=s;
},{}],"Qo4P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Validators=exports.ErrorMesseges=void 0;var e=require("../../utils/dom-abstraction"),t=0,r="";exports.ErrorMesseges={required:"This field is required.",minLength:function(){return"This field's length can't be less then ".concat(t,".")},email:"This field should be an email.",restrictedSymbols:"String contains restricted symbols",same:function(){return"This field is not equal with ".concat(r)}},exports.Validators={required:function(e){return!!e},minLength:function(e){return t=e,function(t){return t.length>=e}},email:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},restrictedSymbols:function(e){return!/[\\/]/.test(String(e).toLowerCase())},same:function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(r){return r===e.$(t).val()}:function(e){return e===t}}};
},{"../../utils/dom-abstraction":"eAIa"}],"tYO4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useControl=void 0;var r=require("./validators");function e(r){var e,s=!0,t=r.value,a={};return Object.getOwnPropertyNames(null!==(e=r.validators)&&void 0!==e?e:{}).forEach(function(e){if(r.validators){var n=r.validators[e](t);a[e]={isError:!n,message:o(r,e)},n||(s=!1)}}),{valid:s,value:t,errors:a,touched:!1}}function o(e,o){return e.errorReason&&e.errorReason[o]?e.errorReason[o]:"function"==typeof r.ErrorMesseges[o]?r.ErrorMesseges[o]():r.ErrorMesseges[o]}exports.useControl=e;
},{"./validators":"Qo4P"}],"OWmm":[function(require,module,exports) {
"use strict";function r(r,o){return i(r)||n(r,o)||e(r,o)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(r,t){if(r){if("string"==typeof r)return o(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(r,t):void 0}}function o(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=r[e];return o}function n(r,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r)){var e=[],o=!0,n=!1,i=void 0;try{for(var u,a=r[Symbol.iterator]();!(o=(u=a.next()).done)&&(e.push(u.value),!t||e.length!==t);o=!0);}catch(s){n=!0,i=s}finally{try{o||null==a.return||a.return()}finally{if(n)throw i}}return e}}function i(r){if(Array.isArray(r))return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareFormFields=exports.checkInputForm=exports.verify=exports.useForm=void 0;var u=require("../../utils/dom-abstraction"),a=require("../../utils/isEmpty"),s=require("../../utils/pure-functions"),c=require("./control");function l(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={valid:!0,controls:{}},o=0,n=Object.entries(t);o<n.length;o++){var i=r(n[o],2),u=i[0],a=i[1];e.controls[u]=c.useControl(a),e.controls[u].valid||(e.valid=!1)}return e}exports.useForm=l;var f=function(r){return function(t){var e=function(t,e){t.touched=!0;var o=s.first(r.componentsInst.filter(function(r){return r.props.options.id===e}));return o.props.control=t,a.isEmpty(o)||r.$emit(o.EVENTS.UPDATE),t.valid},o=l(r.props.form);if(o.controls){if(t){var n=o.controls[t.id];return e(n,t.id)}Object.getOwnPropertyNames(r.props.form).forEach(function(t){var n=r.$root.find("#".concat(t)).$el;if(o.controls){var i=o.controls[n.id];e(i,n.id)}})}return o.valid}};function p(r,t){var e=Object.getOwnPropertyNames(t),o=!1;return e.forEach(function(t){u.$(r).hasId(t)&&(o=!0)}),o}function d(r){return Object.getOwnPropertyNames(r).map(function(t){var e,o;return{title:s.lodashToStr(t),id:t,name:t,type:null!==(e=r[t].type)&&void 0!==e?e:"text",errorReason:null!==(o=r[t].errorReason)&&void 0!==o?o:void 0}})}exports.verify=f,exports.checkInputForm=p,exports.prepareFormFields=d;
},{"../../utils/dom-abstraction":"eAIa","../../utils/isEmpty":"QapI","../../utils/pure-functions":"iuWH","./control":"tYO4"}],"M52i":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HideLeftSidebarLoader=exports.ShowLeftSidebarLoader=exports.LeftSidebarLoaderInit=void 0;var n=require("../../../utils/dom-abstraction"),o=i(require("./LeftSidebarLoader.tmpl"));require("./LeftSidebarLoader.scss");var a=function(){function t(){if(e(this,t),t.__instance)return t.__instance;this.$loader=n.$.create("div","loader_LeftSidebarLoader"),this.$loader.html(o.default),t.__instance=this,this.init()}return r(t,[{key:"show",value:function(){this.$loader.addClass("show")}},{key:"hide",value:function(){this.$loader.removeClass("show")}},{key:"init",value:function(){return this.$title=n.$.create("span","loader_title"),this.$loader.append(this.$title),n.$("body").append(this.$loader),this}},{key:"setTitle",value:function(e){return this.$title.text(e),this}},{key:"remove",value:function(){this.hide(),this.$loader.remove()}}]),t}();function s(){return new a}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";return function(){(new a).setTitle(e).show()}}function u(){(new a).hide()}exports.LeftSidebarLoaderInit=s,exports.ShowLeftSidebarLoader=d,exports.HideLeftSidebarLoader=u;
},{"../../../utils/dom-abstraction":"eAIa","./LeftSidebarLoader.tmpl":"TBFh","./LeftSidebarLoader.scss":"YK9s"}],"TZs1":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=s();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}function i(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?c(e):r}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.UsersAPI=void 0;var l=require("../../controllers/LeftSidebar/LeftSidebarLoader/LeftSidebarLoader"),d=require("../loader/loader"),h=require("../notify/notify"),y=require("./BaseApi"),p=require("./XHR"),b=function(t){o(a,y.BaseAPI);var r=u(a);function a(){var t;return e(this,a),(t=r.apply(this,arguments)).host="".concat(t.basehost,"/user"),t}return n(a,[{key:"get",value:function(t){var e={withCredentials:!0,beforeRequest:d.ShowLoader()};return p.XHR.get("".concat(this.host,"/").concat(t),e).then(function(t){return{status:"success",data:t}}).catch(function(t){return h.notifyError(t.reason),{status:"failed"}}).finally(function(){d.HideLoader()})}},{key:"search",value:function(t){var e={data:{login:t},withCredentials:!0,beforeRequest:l.ShowLeftSidebarLoader()};return p.XHR.post("".concat(this.host,"/search"),e).then(function(t){return{status:"success",data:t}}).catch(function(t){return h.notifyError(t.reason),{status:"failed"}}).finally(function(){l.HideLeftSidebarLoader()})}},{key:"update",value:function(t){var e={data:t,withCredentials:!0,beforeRequest:d.ShowLoader()};return p.XHR.put("".concat(this.host,"/profile"),e).then(function(t){return{status:"success",data:t}}).catch(function(t){return h.notifyError(t.reason),{status:"failed"}}).finally(function(){d.HideLoader()})}},{key:"changeAvatar",value:function(t){var e={data:t,withCredentials:!0,beforeRequest:d.ShowLoader()};return p.XHR.put("".concat(this.host,"/profile/avatar"),e).then(function(t){return{status:"success",data:t}}).catch(function(t){return h.notifyError(t.reason),{status:"failed"}}).finally(function(){d.HideLoader()})}},{key:"changePassword",value:function(t){var e={data:t,withCredentials:!0,beforeRequest:d.ShowLoader()};return p.XHR.put("".concat(this.host,"/password"),e).then(function(t){return{status:"success",data:t}}).catch(function(t){return h.notifyError(t.reason),{status:"failed"}}).finally(function(){d.HideLoader()})}}]),a}();exports.UsersAPI=b;
},{"../../controllers/LeftSidebar/LeftSidebarLoader/LeftSidebarLoader":"M52i","../loader/loader":"iVNX","../notify/notify":"t817","./BaseApi":"oRiH","./XHR":"AWbh"}],"uDpL":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AccountController=void 0;var s=require("../../utils/isEmpty"),c=require("../../utils/pure-functions"),u=i(require("../../core/store/actions")),l=require("../../core/xhr/AuthAPI"),d=require("../../models/User"),v=require("../../core/store/Store"),p=require("../../core/validator/form"),f=require("../../core/xhr/UsersAPI"),h=require("../../core/store/actionTypes"),g=require("../../core/notify/notify"),S=require("../../utils/htmlspecialchars"),m=function(){function t(n){e(this,t),this.component=n}return n(t,[{key:"update",value:function(e){var t,n,r,o,i,s,l,d,v,m,w,y;return a(this,void 0,void 0,regeneratorRuntime.mark(function a(){var _,A,b,x,P;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!p.verify(this.component)()){a.next=15;break}return a.prev=1,_={first_name:null!==(n=null===(t=e.get("first_name"))||void 0===t?void 0:t.toString())&&void 0!==n?n:"",second_name:null!==(o=null===(r=e.get("second_name"))||void 0===r?void 0:r.toString())&&void 0!==o?o:"",login:null!==(s=null===(i=e.get("login"))||void 0===i?void 0:i.toString())&&void 0!==s?s:"",email:null!==(d=null===(l=e.get("email"))||void 0===l?void 0:l.toString())&&void 0!==d?d:"",display_name:null!==(m=null===(v=e.get("display_name"))||void 0===v?void 0:v.toString())&&void 0!==m?m:"",phone:null!==(y=null===(w=e.get("phone"))||void 0===w?void 0:w.toString())&&void 0!==y?y:""},A=S.specialcharsObject(_),a.next=6,(new f.UsersAPI).update(A);case 6:b=a.sent,x=b.status,P=b.data,c.isSuccess(x)&&(this.component.$dispatch({type:h.Actions.ACCOUNT_SETTINGS_UPDATE,data:P}),this.component.$dispatch(u.setSession({login:P.login})),g.notify("Settings was updated successfuly",g.NoticeStatus.SUCCESS,3e3)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.warn(a.t0);case 15:case"end":return a.stop()}},a,this,[[1,12]])}))}},{key:"changePassword",value:function(e){var t,n,r,o;return a(this,void 0,void 0,regeneratorRuntime.mark(function i(){var a,s,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!p.verify(this.component)()){i.next=13;break}return i.prev=1,a={oldPassword:null!==(n=null===(t=e.get("old_password"))||void 0===t?void 0:t.toString())&&void 0!==n?n:"",newPassword:null!==(o=null===(r=e.get("new_password"))||void 0===r?void 0:r.toString())&&void 0!==o?o:""},i.next=5,(new f.UsersAPI).changePassword(a);case 5:s=i.sent,u=s.status,c.isSuccess(u)&&(this.component.$dispatch({type:h.Actions.ACCOUNT_PASSWORD_CHANGE}),g.notify("Your password was updated successfuly",g.NoticeStatus.SUCCESS,3e3)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(1),console.warn(i.t0);case 13:case"end":return i.stop()}},i,this,[[1,10]])}))}},{key:"changeAvatar",value:function(e){return a(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(new f.UsersAPI).changeAvatar(e);case 3:n=t.sent,r=n.status,o=n.data,c.isSuccess(r)&&(this.component.$dispatch({type:h.Actions.ACCOUNT_SETTINGS_UPDATE,data:o}),g.notify("Your avatar was updated successfuly",g.NoticeStatus.SUCCESS,3e3),this.component.$emit(this.component.EVENTS.UPDATE)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.warn(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}))}}],[{key:"getState",value:function(){var e;return null!==(e=v.Store.get().getState().accountSettings)&&void 0!==e?e:{}}},{key:"getAccount",value:function(){var e=t.getState();return s.isEmpty(e)?t.fetch():e}},{key:"fetch",value:function(){return a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(new l.AuthAPI).account();case 3:if(t=e.sent,!(n=t.data)){e.next=10;break}return r=new d.User(n),v.Store.get().dispatch(u.accountSettingsUpdate(r)),v.Store.get().dispatch(u.setSession({login:r.login})),e.abrupt("return",r);case 10:v.Store.get().dispatch(u.setSession()),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.warn(e.t0),v.Store.get().dispatch(u.setSession());case 17:case"end":return e.stop()}},e,null,[[0,13]])}))}}]),t}();exports.AccountController=m;
},{"../../utils/isEmpty":"QapI","../../utils/pure-functions":"iuWH","../../core/store/actions":"VNWQ","../../core/xhr/AuthAPI":"iTWT","../../models/User":"ODHw","../../core/store/Store":"RuC9","../../core/validator/form":"OWmm","../../core/xhr/UsersAPI":"TZs1","../../core/store/actionTypes":"ce8K","../../core/notify/notify":"t817","../../utils/htmlspecialchars":"uNtu"}],"Fg24":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n='\n<div class="main__default">\n    <div class="main__wrapper">\n        <h1>{{title}}</h1>\n        <p>{{content}}</p>\n        {{link}}\n    </div>\n\n    <div class="default__right_sidebar  scroll_style">\n        <div class="info__content">\n            <Content></Content>\n        </div>\n    </div>\n</div>\n';exports.default=n;
},{}],"RGoJ":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultPage=void 0;var t=e(require("./DefaultPage.tmpl"));require("./DefaultPage.scss");var a=require("../../../core/router/Router");function r(e,t){return t.replace(/Content/gi,e)}exports.DefaultPage={name:"DefaultPage",template:t.default,components:[],props:{pagename:"defaultpage",title:"Welcome to Easy conversation chats",content:"You will find a companion for any topic here"},subscribers:{},listeners:["click"],methods:{onClick:function(e){"back"===e.target.dataset.action&&(e.preventDefault(),a.Router.back())}},beforeCreate:function(){this.template=r(this.components[0].name,this.template)}};
},{"./DefaultPage.tmpl":"Fg24","./DefaultPage.scss":"RHFU","../../../core/router/Router":"uA50"}],"MAGv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n='\n<form class="info__section form__sign_in"\n<v-if="action">    \n    action="{{action}}"\n</v-if>\n<v-if="method">    \n    method="{{method}}"\n</v-if>\n>\n    <div class="info__content" >\n      <h3>Sign In</h3>\n      \n        <v-for :field :index in fields>\n         <InputGroup bind:property="form.{{field.id}}" bind:control="form_control.{{field.id}}" bind:options="fields[{{index}}]"></InputGroup>\n        </v-for>\n    </div>\n    \n    <div class="info__actions">\n    <button type="submit" class="button info__button button_primary" data-action="signin">Sign in</button>\n    <p>Don\'t have an account yet?</p>\n    <button type="button" class="button info__button button_outline_primary" data-action="signup">Sign up</button>        \n    </div>\n</form>\n';exports.default=n;
},{}],"pBdx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n='\n<div class="input_group <v-if="control.touched && !control.valid">invalid</v-if>">\n    <label for="{{options.id}}">{{options.title}}</label>\n    <input \n    <v-if="options.id">\n        id="{{options.id}}"\n    </v-if>\n        class="input {{options.css}}"\n    <v-if="options.type">\n        type="{{options.type}}"\n    <v-else>\n        type="text"\n    </v-if>\n    <v-if="options.name">\n        name="{{options.name}}"\n    </v-if>\n        \n        value="{{property.value}}"\n    <v-if="options.placeholder">\n        placeholder="{{options.placeholder}}"\n    </v-if>\n    <v-if="options.required">\n        required\n    </v-if>\n   />\n\n   <v-for :error :key in control.errors>\n      <v-if="control.errors.{{key}}.isError">\n         <small>{{error.message}}</small>\n      </v-if>\n   </v-for>\n</div>\n';exports.default=n;
},{}],"wfDr":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputGroup=void 0;var t=e(require("./InputGroup.tmpl"));require("./InputGroup.scss");var r=require("../../../utils/dom-abstraction");exports.InputGroup={name:"InputGroup",template:t.default,components:[],props:{options:{},property:{},value:""},listeners:["keyup"],subscribers:{},methods:{onKeyup:function(e){r.$(e.target).hasId(this.props.options.id)&&(this.props.property.value=e.target.value,this.value=e.target.value)}},beforeCreate:function(){this.props.value=this.props.property.value}};
},{"./InputGroup.tmpl":"pBdx","./InputGroup.scss":"YK9s","../../../utils/dom-abstraction":"eAIa"}],"EkBX":[function(require,module,exports) {
"use strict";var r=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SignIn=void 0;var e=r(require("./SignIn.tmpl"));require("./SignIn.scss");var t=require("../../structural/InputGroup/InputGroup"),o=require("../../../utils/dom-abstraction"),i=require("../../../core/validator/form"),n=require("../../../core/validator/validators"),a=require("../../../core/router/Router"),u=require("../../../controllers/Auth/AuthController"),s=require("../../../core/loader/loader"),l=n.Validators,p=l.required,d=l.minLength;exports.SignIn={name:"SignIn",template:e.default,components:[t.InputGroup],props:{pagename:"signin",form:{login:{value:"",validators:{required:p}},password:{value:"",validators:{required:p,minLength:d(3)},type:"password"}},form_control:{}},listeners:["click","submit","blur"],subscribers:{},methods:{onBlur:function(r){i.checkInputForm(r.target,this.props.form)&&i.verify(this)(r.target)},onSubmit:function(r){o.$(r.target).hasClass("form__sign_in")&&(r.preventDefault(),new u.AuthController(this).login(new FormData(r.target)))},onClick:function(r){"signup"===r.target.dataset.action&&a.Router.navigate("signup")}},beforePrepare:function(){this.props.fields=i.prepareFormFields(this.props.form)},afterInit:function(){window.ShowLoader=s.ShowLoader,window.HideLoader=s.HideLoader}};
},{"./SignIn.tmpl":"MAGv","./SignIn.scss":"YK9s","../../structural/InputGroup/InputGroup":"wfDr","../../../utils/dom-abstraction":"eAIa","../../../core/validator/form":"OWmm","../../../core/validator/validators":"Qo4P","../../../core/router/Router":"uA50","../../../controllers/Auth/AuthController":"noA6","../../../core/loader/loader":"iVNX"}],"ODkz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n='\n<form class="info__section form__sign_up"\n<v-if="action">    \n    action="{{action}}"\n</v-if>\n<v-if="method">    \n    method="{{method}}"\n</v-if>\n>\n    <div class="info__content" >\n      <h3>Sign Up</h3>\n        <v-for :field :index in fields>\n        <InputGroup bind:property="form.{{field.id}}" bind:control="form_control.{{field.id}}" bind:options="fields[{{index}}]"></InputGroup>\n        </v-for>\n    </div>\n    \n    <div class="info__actions">\n    <button type="submit" class="button info__button button_primary" data-action="signup">Sign up</button>\n    <a href="#" data-action="to-signin">Back to Sign in</a>       \n    </div>\n</form>\n';exports.default=n;
},{}],"U9Yl":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SignUp=void 0;var r=e(require("./SignUp.tmpl"));require("./SignUp.scss");var t=require("../../structural/InputGroup/InputGroup"),i=require("../../../utils/dom-abstraction"),o=require("../../../core/validator/validators"),a=require("../../../core/validator/form"),u=require("../../../core/router/Router"),s=require("../../../controllers/Auth/AuthController"),n=o.Validators,l=n.required,p=n.minLength,d=n.email;exports.SignUp={name:"SignUp",template:r.default,components:[t.InputGroup],props:{pagename:"signup",form:{login:{value:"",validators:{required:l}},email:{value:"",validators:{required:l,email:d}},first_name:{value:"",validators:{required:l}},second_name:{value:"",validators:{required:l}},password:{value:"",validators:{required:l,minLength:p(3)},type:"password"},phone:{value:"",validators:{required:l}}},form_control:{}},listeners:["submit","blur","click"],subscribers:{},methods:{onBlur:function(e){a.checkInputForm(e.target,this.props.form)&&a.verify(this)(e.target)},onSubmit:function(e){i.$(e.target).hasClass("form__sign_up")&&(e.preventDefault(),new s.AuthController(this).register(new FormData(e.target)))},onClick:function(e){"to-signin"===e.target.dataset.action&&(e.preventDefault(),u.Router.navigate("signin"))}},beforeCreate:function(){this.props.fields=a.prepareFormFields(this.props.form)}};
},{"./SignUp.tmpl":"ODkz","./SignUp.scss":"YK9s","../../structural/InputGroup/InputGroup":"wfDr","../../../utils/dom-abstraction":"eAIa","../../../core/validator/validators":"Qo4P","../../../core/validator/form":"OWmm","../../../core/router/Router":"uA50","../../../controllers/Auth/AuthController":"noA6"}],"wSz0":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageTypes=void 0,function(e){e.MESSAGE="message",e.FILE="file",e.USER_CONNECTED="user connected",e.GET_OLD="get old",e.ERROR="error"}(e=exports.MessageTypes||(exports.MessageTypes={}));
},{}],"kPS7":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=u();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?c(e):n}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChatsAPI=void 0;var f=require("../loader/loader"),l=require("../notify/notify"),y=require("./BaseApi"),p=require("./XHR"),d=function(t){o(s,y.BaseAPI);var n=a(s);function s(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(this,s),(t=n.call(this)).host="".concat(t.basehost,"/chats"),t.xhrOptions={},t.defaultXHROptions={withCredentials:!0,beforeRequest:f.ShowLoader(),afterRequest:f.HideLoader},t.onFinally=function(){t.xhrOptions.afterRequest?t.xhrOptions.afterRequest():t.defaultXHROptions.afterRequest()},t.onError=function(t){return l.notifyError(t.reason),{status:"failed"}},t.xhrOptions=Object.assign(Object.assign({},t.defaultXHROptions),r),t}return r(s,[{key:"getChats",value:function(t){var e=Object.assign(Object.assign({},this.xhrOptions),{data:t});return p.XHR.get("".concat(this.host),e).then(function(t){return{status:"success",data:t}}).catch(this.onError).finally(this.onFinally)}},{key:"createChat",value:function(t){var e=Object.assign(Object.assign({},this.xhrOptions),{data:{title:t}});return p.XHR.post("".concat(this.host),e).then(function(t){return{status:"success",data:t.id}}).catch(this.onError).finally(this.onFinally)}},{key:"deleteChat",value:function(t){var e=Object.assign(Object.assign({},this.xhrOptions),{data:{chatId:t}});return p.XHR.delete("".concat(this.host),e).then(function(t){return{status:"success",data:t}}).catch(this.onError).finally(this.onFinally)}},{key:"getChatUsers",value:function(t){var e=Object.assign(Object.assign({},this.xhrOptions),{data:t});return p.XHR.get("".concat(this.host,"/").concat(t.id,"/users"),e).then(function(t){return{status:"success",data:t}}).catch(this.onError).finally(this.onFinally)}},{key:"getNewMessagesCount",value:function(t){var e=Object.assign({},this.xhrOptions);return p.XHR.get("".concat(this.host,"/new/").concat(t),e).then(function(t){return{status:"success",data:{unread_count:t.unread_count}}}).catch(this.onError).finally(this.onFinally)}},{key:"uploadAvatar",value:function(t){var e=Object.assign(Object.assign({},this.xhrOptions),{data:t});return p.XHR.put("".concat(this.host,"/avatar"),e).then(function(t){return{status:"success",data:t}}).catch(this.onError).finally(this.onFinally)}},{key:"addUsers",value:function(t){var e=Object.assign(Object.assign({},this.xhrOptions),{data:t});return p.XHR.put("".concat(this.host,"/users"),e).then(function(){return{status:"success"}}).catch(this.onError).finally(this.onFinally)}},{key:"deleteUsers",value:function(t){var e=Object.assign(Object.assign({},this.xhrOptions),{data:t});return p.XHR.delete("".concat(this.host,"/users"),e).then(function(){return{status:"success"}}).catch(this.onError).finally(this.onFinally)}},{key:"requestToken",value:function(t){return p.XHR.post("".concat(this.host,"/token/").concat(t),{withCredentials:!0}).then(function(t){return{status:"success",data:t}}).catch(this.onError)}}]),s}();exports.ChatsAPI=d;
},{"../loader/loader":"iVNX","../notify/notify":"t817","./BaseApi":"oRiH","./XHR":"AWbh"}],"H3KP":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Chat=void 0;var t=require("../utils/pure-functions"),s=require("./User"),a=function a(i){if(e(this,a),this.id=i.id,this.title=i.title,this.avatar=i.avatar,this.unread_count=i.unread_count,null!==i.last_message){var n=t.isPlainObject(i.last_message)?i.last_message:JSON.parse(i.last_message);this.last_message={time:n.time,content:n.content,user:new s.User(n.user)}}else this.last_message=null};exports.Chat=a;
},{"../utils/pure-functions":"iuWH","./User":"ODHw"}],"x4Ds":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HideChatInfoLoader=exports.ShowChatInfoLoader=void 0,require("../../../core/loader/loader.scss");var e=require("../../../utils/dom-abstraction");function o(){e.$(".chat_users").$el&&e.$(".chat_users").addClass("loading")}function r(){e.$(".chat_users").$el&&e.$(".chat_users").removeClass("loading")}exports.ShowChatInfoLoader=o,exports.HideChatInfoLoader=r;
},{"../../../core/loader/loader.scss":"YK9s","../../../utils/dom-abstraction":"eAIa"}],"STqM":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function o(e){try{u(n.next(e))}catch(t){s(t)}}function i(e){try{u(n.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,i)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChatsController=void 0;var i=require("../../utils/pure-functions"),u=s(require("../../core/store/actions")),c=require("../../models/User"),h=require("../../core/store/Store"),d=require("../../core/validator/form"),f=require("../../core/notify/notify"),l=require("../../core/xhr/ChatsAPI"),v=require("../../models/Chat"),p=require("../../components/structural/InfoChat/InfoChatLoader"),m=require("../LeftSidebar/LeftSidebarLoader/LeftSidebarLoader"),w=require("../../utils/htmlspecialchars"),C=function(){function t(r){e(this,t),this.component=r}return r(t,[{key:"createChat",value:function(e){var t,r;return o(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,s,o,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d.verify(this.component)()){n.next=14;break}return n.prev=1,a=null!==(r=null===(t=e.get("title"))||void 0===t?void 0:t.toString())&&void 0!==r?r:"",s=w.htmlspecialchars(a),n.next=6,(new l.ChatsAPI).createChat(s);case 6:o=n.sent,u=o.status,i.isSuccess(u)&&(this.component.$emit("HideNewChatModal"),this.component.$emit("Chat:updated"),f.notify("New Chat was created successfuly",f.NoticeStatus.SUCCESS,3e3)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.warn(n.t0);case 14:case"end":return n.stop()}},n,this,[[1,11]])}))}},{key:"getChats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,a,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e?{beforeRequest:function(){},afterRequest:m.HideLeftSidebarLoader}:{beforeRequest:m.ShowLeftSidebarLoader(),afterRequest:m.HideLeftSidebarLoader},t.next=4,new l.ChatsAPI(r).getChats();case 4:if(n=t.sent,a=n.status,s=n.data,!i.isSuccess(a)){t.next=11;break}return o=s.map(function(e){return new v.Chat(e)}),this.component.$dispatch(u.uploadChats(o)),t.abrupt("return",o);case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(0),console.warn(t.t0),t.abrupt("return",null);case 17:case"end":return t.stop()}},t,this,[[0,13]])}))}},{key:"uploadAvatar",value:function(e,t){return o(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.append("chatId",e.toString()),r.next=4,(new l.ChatsAPI).uploadAvatar(t);case 4:n=r.sent,a=n.status,s=n.data,i.isSuccess(a)&&(this.component.$dispatch(u.rightSidebar({chat:s})),f.notify("Your avatar was updated successfuly",f.NoticeStatus.SUCCESS,3e3),this.component.$emit("Chat:updated",s.id)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.warn(r.t0);case 13:case"end":return r.stop()}},r,this,[[0,10]])}))}},{key:"delete",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(new l.ChatsAPI).deleteChat(e);case 3:r=t.sent,n=r.status,i.isSuccess(n)&&(f.notify("The chat was deleted successfuly",f.NoticeStatus.SUCCESS,3e3),this.component.$dispatch(u.selectChat(null)),this.component.$emit("Chat:updated"),this.component.$emit("closeRightSidebar"),this.component.$dispatch(u.rightSidebar({chat:{}}))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.warn(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}))}},{key:"getChatUsers",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,a,s,o,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={id:e},n={beforeRequest:p.ShowChatInfoLoader,afterRequest:p.HideChatInfoLoader},t.next=5,new l.ChatsAPI(n).getChatUsers(r);case 5:if(a=t.sent,s=a.status,o=a.data,!i.isSuccess(s)){t.next=12;break}return d=o.map(function(e){return new c.User(e)}),h.Store.get().dispatch(u.saveUsers(d)),t.abrupt("return",d);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.warn(t.t0);case 17:case"end":return t.stop()}},t,null,[[0,14]])}))}},{key:"addUser",value:function(e,t){return o(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,a,s,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n={users:[e],chatId:t},a={beforeRequest:p.ShowChatInfoLoader,afterRequest:p.HideChatInfoLoader},r.next=5,new l.ChatsAPI(a).addUsers(n);case 5:s=r.sent,o=s.status,i.isSuccess(o)&&(this.component.name.startsWith("UserRemote")&&(this.component.props.css="added",this.component.$emit(this.component.EVENTS.UPDATE)),this.component.$emit("Chat:userAdded"),f.notify("User was added to chat")),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.warn(r.t0);case 13:case"end":return r.stop()}},r,this,[[0,10]])}))}},{key:"deleteUser",value:function(e,t){return o(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,a,s,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n={users:[e],chatId:t},a={beforeRequest:p.ShowChatInfoLoader,afterRequest:p.HideChatInfoLoader},r.next=5,new l.ChatsAPI(a).deleteUsers(n);case 5:s=r.sent,o=s.status,i.isSuccess(o)&&(this.component.$emit("Chat:userDeleted"),f.notify("User was removed from chat")),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.warn(r.t0);case 13:case"end":return r.stop()}},r,this,[[0,10]])}))}}],[{key:"getState",value:function(){var e;return null!==(e=h.Store.get().getState().chats)&&void 0!==e?e:{}}},{key:"getAvailableChats",value:function(){var e;return(null===(e=t.getState().availableChats)||void 0===e?void 0:e.map(function(e){return new v.Chat(e)}))||[]}},{key:"getSelectedChatId",value:function(){var e;return null!==(e=h.Store.get().getState().selectedChatId)&&void 0!==e?e:0}},{key:"getSelectedChat",value:function(){var e,r=t.getSelectedChatId(),n=null===(e=t.getState().availableChats)||void 0===e?void 0:e.filter(function(e){return e.id===r})[0];return n?new v.Chat(n):null}},{key:"getToken",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(new l.ChatsAPI).requestToken(e);case 3:if(r=t.sent,n=r.status,a=r.data,!i.isSuccess(n)){t.next=9;break}return s=a.token,t.abrupt("return",s);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,11]])}))}},{key:"getNewMessagesCount",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&0!==e){t.next=2;break}return t.abrupt("return",-1);case 2:return t.prev=2,r={beforeRequest:function(){},afterRequest:function(){}},t.next=6,new l.ChatsAPI(r).getNewMessagesCount(e);case 6:if(n=t.sent,a=n.status,s=n.data,!i.isSuccess(a)){t.next=11;break}return t.abrupt("return",s.unread_count);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.warn(t.t0);case 16:case"end":return t.stop()}},t,null,[[2,13]])}))}}]),t}();exports.ChatsController=C;
},{"../../utils/pure-functions":"iuWH","../../core/store/actions":"VNWQ","../../models/User":"ODHw","../../core/store/Store":"RuC9","../../core/validator/form":"OWmm","../../core/notify/notify":"t817","../../core/xhr/ChatsAPI":"kPS7","../../models/Chat":"H3KP","../../components/structural/InfoChat/InfoChatLoader":"x4Ds","../LeftSidebar/LeftSidebarLoader/LeftSidebarLoader":"M52i","../../utils/htmlspecialchars":"uNtu"}],"Aczk":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(s,r){function i(e){try{a(o.next(e))}catch(t){r(t)}}function c(e){try{a(o.throw(e))}catch(t){r(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}a((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.YPSocket=void 0;var s=require("../../controllers/Auth/AuthController"),r=require("../../controllers/Chats/ChatsController"),i=require("../../models/Message"),c=require("../notify/notify"),a=function(){function t(n,o,s){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e(this,t),this.userId=n,this.chatId=o,this.messengerController=s,this.uploadMode=i,this.basehost="wss://ya-praktikum.tech/ws/chats",this.host="",this.socket=null,this.onOpen=function(){console.log("Connect successful!")},this.onClose=function(e){if(console.log("Code: ".concat(e.code," | Reason: ").concat(e.reason)),e.wasClean)console.log("Connection close OK");else{console.warn("Lost connection");try{r.messengerController.connect(),console.log("Connection reused")}catch(t){console.warn(t)}}},this.onMessage=function(e){try{console.log(" ",e.data);var t=JSON.parse(e.data);Array.isArray(t)?r.messengerController.onUploadMessages(t):r.messengerController.onGetMessage(t)}catch(n){console.warn(n.message)}},this.onError=function(e){console.warn("",e.message)}}return n(t,[{key:"init",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.socket&&this.destroy(),!s.AuthController.isAuth()){e.next=14;break}return e.next=5,r.ChatsController.getToken(this.chatId);case 5:t=e.sent,this.host="".concat(this.basehost,"/").concat(this.userId,"/").concat(this.chatId,"/").concat(t),this.socket=new WebSocket(this.host),this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),e.next=15;break;case 14:this.socket&&this.close();case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("~ error",e.t0),c.notifyError("Connection failed");case 21:case"end":return e.stop()}},e,this,[[0,17]])}))}},{key:"send",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.MessageTypes.MESSAGE;return o(this,void 0,void 0,regeneratorRuntime.mark(function o(){var s,r=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:s=function(){var t;null===(t=this.socket)||void 0===t||t.send(JSON.stringify({content:e,type:n}))};try{1===(null===(t=this.socket)||void 0===t?void 0:t.readyState)?s.call(this):setTimeout(function(){s.call(r)},500)}catch(i){console.warn("Send message error",i)}case 2:case"end":return o.stop()}},o,this)}))}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.send(e.toString(),i.MessageTypes.GET_OLD);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.warn("Send message error",t.t0);case 8:case"end":return t.stop()}},t,this,[[0,5]])}))}},{key:"destroy",value:function(){this.socket&&(this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError),this.socket=null)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Chat deleted";this.socket&&(this.socket.close(1e3,e),this.destroy(),console.log("Connection closed"))}}]),t}();exports.YPSocket=a;
},{"../../controllers/Auth/AuthController":"noA6","../../controllers/Chats/ChatsController":"STqM","../../models/Message":"wSz0","../notify/notify":"t817"}],"BTQP":[function(require,module,exports) {
"use strict";function e(e){return"desc"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc")?e.sort(function(e,t){return e.time<t.time?1:-1}):e.sort(function(e,t){return e.time>t.time?1:-1})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortByTime=void 0,exports.sortByTime=e;
},{}],"MNDB":[function(require,module,exports) {
"use strict";function e(e){return o(e)||r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function o(e){if(Array.isArray(e))return i(e)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&u(t,e,n);return l(t,e),t},f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessengerController=void 0;var h,v,g,p=require("../../core/store/Store"),y=d(require("../../core/store/actions")),m=require("../../models/Message"),M=require("../Chats/ChatsController"),b=require("../AccountController/AccountController"),C=require("../../core/connections/YPSocket"),S=require("../../utils/pure-functions"),w=require("../../utils/mergeDeep"),k=require("../../utils/sortMessages"),x=require("../../core/loader/loader"),I=require("../../utils/htmlspecialchars"),j=function(){function t(e){var n,r,o,i;s(this,t),this.component=e,this.chatId=null!==(r=null===(n=this.component.props.chat)||void 0===n?void 0:n.id)&&void 0!==r?r:M.ChatsController.getSelectedChatId(),this.userId=null!==(i=null===(o=this.component.props.account)||void 0===o?void 0:o.id)&&void 0!==i?i:b.AccountController.getAccount()}return c(t,[{key:"getChatMessages",value:function(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chatId;return null!==(n=null===(e=t.getState()[r])||void 0===e?void 0:e.filter(O))&&void 0!==n?n:[]}},{key:"connect",value:function(){t.connection=new C.YPSocket(this.userId,this.chatId,this),t.connection.init()}},{key:"disconnect",value:function(){t.connection&&t.connection.close()}},{key:"sendTextMessage",value:function(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("string"!=typeof e&&(e=I.htmlspecialchars(S.getFormData(e).message)),""===e){n.next=4;break}return n.next=4,t.connection.send(e);case 4:case"end":return n.stop()}},n)}))}},{key:"onGetMessage",value:function(e){e.type!==m.MessageTypes.MESSAGE&&e.type!==m.MessageTypes.FILE||this.addMessages([e])}},{key:"onUploadMessages",value:function(t){x.ShowLoader()();var n=(g=[].concat(e(null!=g?g:[]),e(t))).length;n>0&&n<v?(h=S.last(t).id,this.fetchMessages(this.chatId,h)):(this.updateChatMessages(g),x.HideLoader(),v=0,h=0,g=[])}},{key:"addMessages",value:function(e){var t=w.mergeDeep(this.getChatMessages(),e);p.Store.get().dispatch(y.saveMessenger(this.chatId,t)),t=k.sortByTime(t,"asc"),this.component.$emit("Message:new",this.chatId,S.first(t))}},{key:"updateChatMessages",value:function(e){var t=this.mergeMessages(this.getChatMessages(),e);t=k.sortByTime(t,"asc"),p.Store.get().dispatch(y.updateChetMessages(this.chatId,t)),this.component.$emit("Message:new")}},{key:"mergeMessages",value:function(e,t){var n=e.reduce(function(e,t){var n;return e[(null===(n=t.id)||void 0===n?void 0:n.toFixed())||0]=t,e},{}),r=t.reduce(function(e,t){var n;return e[(null===(n=t.id)||void 0===n?void 0:n.toFixed())||0]=t,e},{}),o=Object.assign(Object.assign({},n),r);return Object.values(o)}},{key:"fetchMessages",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,M.ChatsController.getNewMessagesCount(e);case 2:if(!((v=r.sent)>0)){r.next=6;break}return r.next=6,t.connection.fetch(n);case 6:case"end":return r.stop()}},r)}))}}],[{key:"getState",value:function(){var e;return null!==(e=p.Store.get().getState().messenger)&&void 0!==e?e:{}}},{key:"destroy",value:function(){t.connection&&t.connection.close()}}]),t}();exports.MessengerController=j;var O=function(e){return e.type===m.MessageTypes.MESSAGE||e.type===m.MessageTypes.FILE};
},{"../../core/store/Store":"RuC9","../../core/store/actions":"VNWQ","../../models/Message":"wSz0","../Chats/ChatsController":"STqM","../AccountController/AccountController":"uDpL","../../core/connections/YPSocket":"Aczk","../../utils/pure-functions":"iuWH","../../utils/mergeDeep":"a1Qj","../../utils/sortMessages":"BTQP","../../core/loader/loader":"iVNX","../../utils/htmlspecialchars":"uNtu"}],"noA6":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthController=void 0;var u=require("../../components/pages/DefaultPage/DefaultPage"),s=require("../../components/pages/SignIn/SignIn"),c=require("../../components/pages/SignUp/SignUp"),l=require("../../core/router/Router"),v=require("../../core/store/actionTypes"),d=require("../../core/store/Store"),g=require("../../core/validator/form"),p=require("../../core/xhr/AuthAPI"),f=require("../../utils/isEmpty"),h=require("../../utils/pure-functions"),m=require("../Messenger/MessengerController"),y=i(require("../../core/store/actions")),S=function(){function t(n){e(this,t),this.component=n}return n(t,[{key:"login",value:function(e){var t,n,r,o;return a(this,void 0,void 0,regeneratorRuntime.mark(function i(){var a,u,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!g.verify(this.component)()){i.next=8;break}return a={data:{login:null!==(n=null===(t=e.get("login"))||void 0===t?void 0:t.toString())&&void 0!==n?n:"",password:null!==(o=null===(r=e.get("password"))||void 0===r?void 0:r.toString())&&void 0!==o?o:""}},i.next=5,(new p.AuthAPI).login(a);case 5:u=i.sent,s=u.status,h.isSuccess(s)&&(this.component.$dispatch({type:v.Actions.AUTH_SIGN_IN,data:a.data.login}),l.Router.navigate("chats"));case 8:i.next=13;break;case 10:i.prev=10,i.t0=i.catch(0),console.warn(i.t0);case 13:case"end":return i.stop()}},i,this,[[0,10]])}))}},{key:"logout",value:function(){return a(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(new p.AuthAPI).logout();case 3:this.component.$emit("App:destroy"),m.MessengerController.destroy(),d.Store.get().dispatch(y.logout()),l.Router.navigate("signin"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}))}},{key:"register",value:function(e){var t,n,r,o,i,u,s,c,d,f,m,y;return a(this,void 0,void 0,regeneratorRuntime.mark(function a(){var S,w,b;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!g.verify(this.component)()){a.next=8;break}return S={data:{first_name:null!==(n=null===(t=e.get("first_name"))||void 0===t?void 0:t.toString())&&void 0!==n?n:"",second_name:null!==(o=null===(r=e.get("second_name"))||void 0===r?void 0:r.toString())&&void 0!==o?o:"",login:null!==(u=null===(i=e.get("login"))||void 0===i?void 0:i.toString())&&void 0!==u?u:"",email:null!==(c=null===(s=e.get("email"))||void 0===s?void 0:s.toString())&&void 0!==c?c:"",password:null!==(f=null===(d=e.get("password"))||void 0===d?void 0:d.toString())&&void 0!==f?f:"",phone:null!==(y=null===(m=e.get("phone"))||void 0===m?void 0:m.toString())&&void 0!==y?y:""}},a.next=5,(new p.AuthAPI).register(S);case 5:w=a.sent,b=w.status,h.isSuccess(b)&&(this.component.$dispatch({type:v.Actions.AUTH_SIGN_IN,data:S.data.login}),l.Router.navigate("chats"));case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.warn(a.t0);case 13:case"end":return a.stop()}},a,this,[[0,10]])}))}}],[{key:"indexSignIn",value:function(){return Object.assign(Object.assign({},u.DefaultPage),{components:[s.SignIn]})}},{key:"indexSignUp",value:function(){return Object.assign(Object.assign({},u.DefaultPage),{components:[c.SignUp]})}},{key:"isAuth",value:function(){return!f.isEmpty(d.Store.get().getState().session)}}]),t}();exports.AuthController=S;
},{"../../components/pages/DefaultPage/DefaultPage":"RGoJ","../../components/pages/SignIn/SignIn":"EkBX","../../components/pages/SignUp/SignUp":"U9Yl","../../core/router/Router":"uA50","../../core/store/actionTypes":"ce8K","../../core/store/Store":"RuC9","../../core/validator/form":"OWmm","../../core/xhr/AuthAPI":"iTWT","../../utils/isEmpty":"QapI","../../utils/pure-functions":"iuWH","../Messenger/MessengerController":"MNDB","../../core/store/actions":"VNWQ"}],"Dq4W":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InfoAccount=void 0,require("./InfoAccount.scss");var e=require("../Avatar/Avatar"),o=t(require("./InfoAccount.tmpl")),r=require("../../../controllers/AccountController/AccountController"),n=require("../../../controllers/Auth/AuthController");exports.InfoAccount={name:"InfoAccount",template:o.default,components:[e.Avatar],props:{user:{}},listeners:["click"],subscribers:{},methods:{onClick:function(t){"logout"===t.target.dataset.action&&new n.AuthController(this).logout()}},beforePrepare:function(){this.props.user=r.AccountController.getAccount()}};
},{"./InfoAccount.scss":"YK9s","../Avatar/Avatar":"qI6Q","./InfoAccount.tmpl":"YskN","../../../controllers/AccountController/AccountController":"uDpL","../../../controllers/Auth/AuthController":"noA6"}],"M6Nv":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChatAccount=void 0,require("./ChatAccount.scss");var e=require("../../../utils/dom-abstraction"),o=require("../Avatar/Avatar"),n=t(require("./ChatAccount.tmpl")),c=require("../InfoAccount/InfoAccount"),r=require("../../../controllers/AccountController/AccountController");exports.ChatAccount={name:"ChatAccount",template:n.default,components:[o.Avatar],props:{account:{}},listeners:["click"],subscribers:{},storeSubscribers:{accountSettings:function(t){this.props.account=t,this.$emit(this.EVENTS.UPDATE)}},methods:{onClick:function(t){"settings"===(t.target.dataset.action||e.$(t.target).parent().data.action)&&this.$emit("toggleRightSidebar",{componentName:c.InfoAccount.name})}},beforeCreate:function(){this.props.account=r.AccountController.getAccount()},afterInit:function(){window.rebuildChatAccount=function(){this.$emit(this.EVENTS.UPDATE)}.bind(this)}};
},{"./ChatAccount.scss":"YK9s","../../../utils/dom-abstraction":"eAIa","../Avatar/Avatar":"qI6Q","./ChatAccount.tmpl":"b8Hz","../InfoAccount/InfoAccount":"Dq4W","../../../controllers/AccountController/AccountController":"uDpL"}],"lee6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e='\n<div class="chats__search">\n   <form class="form search__wrapper" \n   <v-if="action">    \n      action="{{action}}"\n   </v-if>\n   <v-if="method">    \n      method="{{method}}"\n   </v-if>\n   >\n   <input type="text" class="input input__search_chats" name="search" value="" placeholder="Search user by login"\n   </form>\n</div>\n';exports.default=e;
},{}],"LQRB":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.LeftSidebarViews=void 0,function(e){e.Chats="Chats",e.ChatsFilter="ChatsFilter",e.ChatsSearch="ChatsSearch"}(e=exports.LeftSidebarViews||(exports.LeftSidebarViews={}));
},{}],"Av3N":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChatSearch=void 0,require("./ChatSearch.scss");var e=require("../../../utils/dom-abstraction"),r=t(require("./ChatSearch.tmpl")),s=require("../../../controllers/LeftSidebar/LeftSidebarViews");function a(){this.$root.addClass("show")}function i(){this.$root.removeClass("show")}exports.ChatSearch={name:"ChatSearch",template:r.default,components:[],props:{},listeners:["input"],subscribers:{toggleLeftSidebarView:function(t){t===s.LeftSidebarViews.ChatsSearch?(this.$root.find("input").val(""),a.call(this)):i.call(this)}},methods:{onInput:function(t){e.$(t.target).hasClass("input__search_chats")&&this.$emit("ChatSearch:input",t.target.value)}}};
},{"./ChatSearch.scss":"YK9s","../../../utils/dom-abstraction":"eAIa","./ChatSearch.tmpl":"lee6","../../../controllers/LeftSidebar/LeftSidebarViews":"LQRB"}],"j538":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../../controllers/LeftSidebar/LeftSidebarViews"),t='\n<div class="chats ">\n\n   <v-if="view === \''.concat(e.LeftSidebarViews.Chats,'\'">\n      \x3c!-- Chats --\x3e\n      <v-for :chat :index in chats>\n      \x3c!-- User --\x3e\n      <Chat bind:chat="chats[{{index}}]"></Chat>\n      \x3c!-- end User --\x3e\n      </v-for>\n      \x3c!-- end chats --\x3e\n      <button type="button" class="button button_new button_primary" data-action="newChat">Create a new Chat</button>\n   </v-if>\n\n   <v-if="view === \'').concat(e.LeftSidebarViews.ChatsFilter,'\'">\n      \x3c!-- ChatsFiltered --\x3e\n      <v-for :chatf :indexf in chatsFiltered>\n      \x3c!-- User --\x3e\n      <Chat bind:chat="chatsFiltered[{{indexf}}]"></Chat>\n      \x3c!-- end User --\x3e\n      </v-for>\n      \x3c!-- end chatsfiltered --\x3e\n      <button type="button" class="button button_new button_primary" data-action="newChat">Create a new Chat</button>\n   </v-if>\n\n   <v-if="view === \'').concat(e.LeftSidebarViews.ChatsSearch,'\'">\n   \n      <v-if="usersRemote.length > 0">\n         \x3c!-- UsersRemote --\x3e\n         <v-for :user :index in usersRemote>\n         \x3c!-- User --\x3e\n         <UserRemote bind:user="usersRemote[{{index}}]"></UserRemote>\n         \x3c!-- end User --\x3e\n         </v-for>\n         \x3c!-- end usersremote --\x3e\n      <v-else>\n         <div class="remote_placeholder__wrapper">\n            <h4 class="remote_placeholder">{{remotePlaceholder}}</h4>\n         </div>\n      </v-if>\n\n   </v-if>\n   \n</div>\n');exports.default=t;
},{"../../../controllers/LeftSidebar/LeftSidebarViews":"LQRB"}],"eXCV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s='\n<div class="chats__user">\n   <div class="user_remote__wrapper {{css}}">\n      <Avatar bind:user="user"></Avatar>\n      <div class="user__info">\n         <span class="user__displayname">{{user.login}}</span>\n         <span class="user__last_message">{{user.first_name}} {{user.second_name}}</span>\n      </div>\n      <div class="user_remote__actions">\n         <button type="button" class="button button_empty_primary button__add_user" data-action="add"><i class="fas fa-plus"></i></button>\n         <span class="user_added"><i class="fas fa-check"></i></span>\n      </div>\n\n   </div>\n</div>;\n';exports.default=s;
},{}],"bvuj":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,n){function i(e){try{c(s.next(e))}catch(t){n(t)}}function a(e){try{c(s.throw(e))}catch(t){n(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}c((s=s.apply(e,t||[])).next())})},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserRemote=void 0,require("./UserRemote.scss");var r=require("../Avatar/Avatar"),s=t(require("./UserRemote.tmpl")),o=require("../../../utils/dom-abstraction"),n=require("../../../controllers/Chats/ChatsController"),i=require("../../../core/notify/notify");function a(e,t){return!!Array.isArray(t)&&t.filter(function(t){return t.id===e}).length>0}exports.UserRemote={name:"UserRemote",template:s.default,components:[r.Avatar],props:{user:{},chatUsers:[],isAdded:!1},listeners:["click"],subscribers:{},methods:{onClick:function(e){var t;"add"===(null!==(t=e.target.dataset.action)&&void 0!==t?t:o.$(e.target).parent().data.action)&&(0===this.props.selectedChatId?i.notify("Select a chat first",i.NoticeStatus.WARNING):new n.ChatsController(this).addUser(this.props.user.id,this.props.selectedChatId))}},beforePrepare:function(){return e(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.name="".concat(this.name,"_").concat(this.props.user.id),this.props.selectedChatId=n.ChatsController.getSelectedChatId(),this.props.chatUsers=this.parentComponent.props.chatUsers,this.props.isAdded=a(this.props.user.id,this.props.chatUsers),this.props.css=this.props.isAdded?"added":"";case 5:case"end":return e.stop()}},e,this)}))},beforeCreate:function(){},beforeMount:function(){}};
},{"./UserRemote.scss":"YK9s","../Avatar/Avatar":"qI6Q","./UserRemote.tmpl":"eXCV","../../../utils/dom-abstraction":"eAIa","../../../controllers/Chats/ChatsController":"STqM","../../../core/notify/notify":"t817"}],"BH6t":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LeftSidebarController=void 0;var n=require("../../core/store/Store"),o=require("./LeftSidebarViews"),i=function(){function t(){e(this,t)}return r(t,null,[{key:"getState",value:function(){var e;return null!==(e=n.Store.get().getState().leftSidebar)&&void 0!==e?e:{}}},{key:"getSidebarView",value:function(){var e;return null!==(e=t.getState().view)&&void 0!==e?e:o.LeftSidebarViews.Chats}}]),t}();exports.LeftSidebarController=i;
},{"../../core/store/Store":"RuC9","./LeftSidebarViews":"LQRB"}],"jyp1":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return u(t,e),t},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(u,a){function o(e){try{s(n.next(e))}catch(t){a(t)}}function i(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?u(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,i)}s((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UsersController=void 0;var i=require("../../core/store/Store"),s=require("../../core/xhr/UsersAPI"),c=require("../../models/User"),l=require("../../utils/pure-functions"),f=a(require("../../core/store/actions")),v=require("../../utils/isEmpty"),p=function(){function t(){e(this,t)}return r(t,null,[{key:"getState",value:function(){var e;return null!==(e=i.Store.get().getState().users)&&void 0!==e?e:{}}},{key:"get",value:function(e){var r;return o(this,void 0,void 0,regeneratorRuntime.mark(function n(){var u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u=null!==(r=t.getState()[e])&&void 0!==r?r:null,n.abrupt("return",v.isEmpty(u)?t.fetch(e):u);case 2:case"end":return n.stop()}},n)}))}},{key:"fetch",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,u,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(new s.UsersAPI).get(e);case 3:if(r=t.sent,n=r.status,u=r.data,!l.isSuccess(n)){t.next=10;break}return a=new c.User(u),i.Store.get().dispatch(f.saveUsers([a])),t.abrupt("return",a);case 10:return t.abrupt("return",null);case 13:return t.prev=13,t.t0=t.catch(0),console.warn(t.t0),t.abrupt("return",null);case 17:case"end":return t.stop()}},t,null,[[0,13]])}))}},{key:"search",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(new s.UsersAPI).search(e);case 3:if(r=t.sent,n=r.status,u=r.data,!l.isSuccess(n)){t.next=8;break}return t.abrupt("return",u.map(function(e){return new c.User(e)}));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.warn(t.t0);case 13:case"end":return t.stop()}},t,null,[[0,10]])}))}}]),t}();exports.UsersController=p;
},{"../../core/store/Store":"RuC9","../../core/xhr/UsersAPI":"TZs1","../../models/User":"ODHw","../../utils/pure-functions":"iuWH","../../core/store/actions":"VNWQ","../../utils/isEmpty":"QapI"}],"wEwS":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function c(t){var e=s();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||!l(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return f(t,arguments,y(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,t)})(t)}function f(t,e,n){return(f=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&p(o,n.prototype),o}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapMessageDateCustom=exports.DateCustom=void 0;var b=function(t){o(u,a(Date));var n=c(u);function u(t){return e(this,u),n.call(this,+t)}return r(u,[{key:"getTimeFormatted",get:function(){var t="0".concat(this.getHours()).slice(-2),e="0".concat(this.getMinutes()).slice(-2);return"".concat(t,":").concat(e)}},{key:"getDateFormatted",get:function(){var t="0".concat(this.getDate()).slice(-2),e="0".concat(this.getMonth()+1).slice(-2),n=this.getFullYear();return"".concat(t,".").concat(e,".").concat(n)}}]),u}();function h(t){return t.date=new b(+Date.parse(t.time)),t}exports.DateCustom=b,exports.mapMessageDateCustom=h;
},{}],"qRRU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s='\n<div class="chats__user">\n   <div class="chat__wrapper {{css}} \n   <v-if="is_selected">\n   chat__active\n   </v-if>"\n\n      >\n      <Avatar bind:user="chat" bind:css="pulse"></Avatar>\n      <div class="chat__info">\n         <span class="chat__displayname">{{chat.title}}</span>\n         <span class="chat__last_message">{{last_message_content}}</span>\n      </div>\n      <div class="chat__actions">\n         <span class="last_message_date">{{last_message_date}}</span>\n         <span \n            class="counter unread_messages_counter is_null">\n            \n         </span>\n      </div>\n\n   </div>\n</div>;\n';exports.default=s;
},{}],"wbcj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../../controllers/RightSidebar/RightSidebarViews"),i='\n<section class="info__section">\n   <div class="info__content">\n      <h3>Chat Info</h3>\n      <h4 class="info__title">{{chat.title}}</h4>\n      <Avatar bind:user="chat" bind:css="avatar__info"></Avatar>\n   </div>\n   <div class="chat_users loading">\n      <div class="chat_info__loader"><div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>\n      <div class="chat_users__wrapper">\n         <span class="users__title">Users in chat:</span>\n         <v-for :user :i in users>\n            <User bind:user="users[{{i}}]"></User>\n         </v-for>\n      </div>\n   </div>\n   <div class="info__actions">\n   <button type="button" class="button info__button button_outline_primary" data-view="'.concat(t.RightSidebarViews.FormChangeChatAvatar,'">Change avatar</button>\n   <button type="button" class="button info__button button_outline_danger" data-action="delete">Delete chat</button>\n   </div>\n</section>\n');exports.default=i;
},{"../../../controllers/RightSidebar/RightSidebarViews":"WKkM"}],"EnQ7":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RightSidebarController=void 0;var o=require("../../core/Component"),r=require("../../core/store/Store"),i=require("../../utils/dom-abstraction"),a=require("../../utils/pure-functions"),c=function(){function e(n){t(this,e),this.component=n,this.state=e.getState()}return n(e,[{key:"changeContent",value:function(){if(this.state.componentName){var t=this.state.componentName,e=a.first(this.component.componentsInst);this.component.$emit(e.EVENTS.DESTROY),e.$remove();var n=i.$.create(t);this.component.$root.find("section").append(n);var r=new o.Component(s.call(this.component,t),n,this.component);this.component.componentsInst=[],this.component.componentsInst.push(r)}}},{key:"addContent",value:function(){var t=a.get(this.state,"componentName","InfoAccount"),e=this.component.$root.find("section"),n=i.$.create(t);e.append(n)}}],[{key:"getState",value:function(){var t;return null!==(t=r.Store.get().getState().rightSidebar)&&void 0!==t?t:{}}},{key:"getChat",value:function(){return e.getState().chat||null}},{key:"getSidebarStatus",value:function(){var t;return null!==(t=e.getState().status)&&void 0!==t?t:"close"}}]),e}();function s(t){return a.first(this.components.filter(function(e){return e.name===t}))}exports.RightSidebarController=c;
},{"../../core/Component":"Gxci","../../core/store/Store":"RuC9","../../utils/dom-abstraction":"eAIa","../../utils/pure-functions":"iuWH"}],"VoOa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s='\n<div class="chats__user">\n   <div class="user__wrapper {{css}} \n   <v-if="is_selected">\n   user__active\n   </v-if>"\n\n      >\n      <Avatar bind:user="user"></Avatar>\n      <div class="user__info">\n         <span class="user__displayname">{{user.display_name}}</span>\n         <span class="user__last_message">{{user.login}}\n         <v-if="user.role"> ({{user.role}})</v-if>\n         </span>\n      </div>\n      <div class="user__actions">\n      <v-if="!isAdmin">\n      <button type="button" class="button button_empty_danger button__delete_user" data-action="delete"><i class="far fa-trash-alt"></i></button>\n      </v-if>\n      </div>\n   </div>\n</div>;\n';exports.default=s;
},{}],"kDzp":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.User=void 0,require("./User.scss");var r=require("../Avatar/Avatar"),t=e(require("./User.tmpl")),s=require("../../../utils/dom-abstraction"),o=require("../../../controllers/Chats/ChatsController");exports.User={name:"User",template:t.default,components:[r.Avatar],props:{user:{},isAdmin:!1},listeners:["click"],subscribers:{},methods:{onClick:function(e){var r;if("delete"===(null!==(r=e.target.dataset.action)&&void 0!==r?r:s.$(e.target).parent().data.action)&&confirm('Are you sure you want to remove "'.concat(this.props.user.login,'" from current chat?'))){var t=o.ChatsController.getSelectedChatId();new o.ChatsController(this).deleteUser(this.props.user.id,t)}}},beforePrepare:function(){this.name="".concat(this.name,"_").concat(this.props.user.id),this.props.isAdmin="admin"===this.props.user.role}};
},{"./User.scss":"YK9s","../Avatar/Avatar":"qI6Q","./User.tmpl":"VoOa","../../../utils/dom-abstraction":"eAIa","../../../controllers/Chats/ChatsController":"STqM"}],"TRGA":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,r,s){return new(r||(r=Promise))(function(o,n){function a(t){try{h(s.next(t))}catch(e){n(e)}}function i(t){try{h(s.throw(t))}catch(e){n(e)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,i)}h((s=s.apply(t,e||[])).next())})},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InfoChat=void 0,require("./InfoChat.scss");var r=require("../Avatar/Avatar"),s=e(require("./InfoChat.tmpl")),o=require("../../../controllers/RightSidebar/RightSidebarController"),n=require("../../../controllers/Chats/ChatsController"),a=require("./InfoChatLoader");require("../../../core/loader/loader.scss");var i=require("../User/User"),h=require("../../../utils/isEmpty");function c(){var t=this;this.props.chat=o.RightSidebarController.getChat(),h.isEmpty(this.props.chat)||new n.ChatsController(this).getChatUsers(this.props.chat.id).then(function(e){t.props.users=e,e.length>0&&t.$emit(t.EVENTS.UPDATE)}).finally(a.HideChatInfoLoader)}exports.InfoChat={name:"InfoChat",template:s.default,components:[r.Avatar,i.User],props:{chat:{},users:[]},listeners:["click"],subscribers:{"Chat:userAdded":function(){c.call(this)},"Chat:userDeleted":function(){c.call(this)}},methods:{onClick:function(t){"delete"===t.target.dataset.action&&confirm('Are you sure you want to delete the chat "'.concat(this.props.chat.title,'?"'))&&new n.ChatsController(this).delete(this.props.chat.id)}},beforePrepare:function(){return t(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.props.selectedChatId=n.ChatsController.getSelectedChatId(),null!==this.props.selectedChatId&&this.props.selectedChatId>0&&c.call(this);case 2:case"end":return t.stop()}},t,this)}))}};
},{"./InfoChat.scss":"YK9s","../Avatar/Avatar":"qI6Q","./InfoChat.tmpl":"wbcj","../../../controllers/RightSidebar/RightSidebarController":"EnQ7","../../../controllers/Chats/ChatsController":"STqM","./InfoChatLoader":"x4Ds","../../../core/loader/loader.scss":"YK9s","../User/User":"kDzp","../../../utils/isEmpty":"QapI"}],"mDF3":[function(require,module,exports) {
"use strict";var t=this&&this.__createBinding||(Object.create?function(t,e,s,i){void 0===i&&(i=s),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,i){void 0===i&&(i=s),t[i]=e[s]}),e=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var i={};if(null!=s)for(var a in s)"default"!==a&&Object.prototype.hasOwnProperty.call(s,a)&&t(i,s,a);return e(i,s),i},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Chat=void 0,require("./Chat.scss");var a=require("../../../utils/dom-abstraction"),r=require("../Avatar/Avatar"),o=require("../../../utils/date"),n=i(require("./Chat.tmpl")),h=s(require("../../../core/store/actions")),c=require("../../../controllers/Chats/ChatsController"),l=require("../InfoChat/InfoChat"),u=require("../../../utils/pure-functions"),d=require("../../../utils/isEmpty");function p(t){var e,s,i=this.props;i.last_message_content=(null==t?void 0:t.content)||(null===(e=i.chat.last_message)||void 0===e?void 0:e.content)||"";var a=(null==t?void 0:t.time)||(null===(s=i.chat.last_message)||void 0===s?void 0:s.time)||null,r=Date.parse(a);i.last_message_date=r?new o.DateCustom(+r).getDateFormatted:"",this.$root&&(this.$root.find(".chat__last_message").html(i.last_message_content),this.$root.find(".last_message_date").html(i.last_message_date))}function f(t){var e=a.$(t).closest(".chat__wrapper");return!!e&&!e.hasClass("chat__active")}function _(){if(!this.name.startsWith("Chat"))throw new Error("`this` is not defined as Chat Component");var t=this.props.chat.id;this.$dispatch(h.selectChat(t)),this.$emit("Chat:selected",t)}exports.Chat={name:"Chat",template:n.default,components:[r.Avatar],props:{chat:{}},listeners:["click"],subscribers:{"Message:new":function(t,e){this.props.chat.id===t&&e&&(p.call(this,e),this.$emit(this.EVENTS.UPDATE))},"Chat:selected":function(t){this.props.chat.id===t?(this.methods.hideCounter.call(this),this.props.is_selected=!0):this.props.is_selected=!1}},storeSubscribers:{chats:function(t){var e=this;if(t.availableChats){var s=u.first(t.availableChats.filter(function(t){return t.id===e.props.chat.id&&t.unread_count>e.props.chat.unread_count}));d.isEmpty(s)||this.props.is_selected?this.methods.hideCounter.call(this):(this.methods.showCounter.call(this),p.call(this,s.last_message))}}},methods:{onClick:function(t){if(a.$(t.target).hasClass("pulse")){var e=this.props.chat,s={componentName:l.InfoChat.name,chat:e};_.call(this),this.$emit("openRightSidebar",s)}else if(f(t.target)){var i=this.props.chat,r={componentName:l.InfoChat.name,chat:i};_.call(this),this.$emit("refreshRightSidebar",r)}},setActive:function(){this.$root.find(".chat__wrapper").addClass("chat__active")},setInactive:function(){this.$root.find(".chat__wrapper").removeClass("chat__active")},showCounter:function(){this.$root.find(".unread_messages_counter").removeClass("is_null")},hideCounter:function(){this.$root.find(".unread_messages_counter").addClass("is_null")}},beforePrepare:function(){this.name="".concat(this.name,"_").concat(this.props.chat.id),this.props.selectedChatId=c.ChatsController.getSelectedChatId(),p.call(this)},beforeMount:function(){this.props.selectedChatId===this.props.chat.id&&(this.methods.setActive.call(this),this.methods.hideCounter.call(this))}};
},{"./Chat.scss":"YK9s","../../../utils/dom-abstraction":"eAIa","../Avatar/Avatar":"qI6Q","../../../utils/date":"wEwS","./Chat.tmpl":"qRRU","../../../core/store/actions":"VNWQ","../../../controllers/Chats/ChatsController":"STqM","../InfoChat/InfoChat":"TRGA","../../../utils/pure-functions":"iuWH","../../../utils/isEmpty":"QapI"}],"C25o":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(s,r,n);return t(s,r),s},s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Chats=void 0,require("./Chats.scss");var i=require("../../../utils/pure-functions"),o=n(require("./Chats.tmpl")),a=require("../../../controllers/LeftSidebar/LeftSidebarViews"),c=require("../UserRemote/UserRemote"),h=require("../../../models/User"),u=require("../../../controllers/LeftSidebar/LeftSidebarController"),l=require("../../../controllers/LeftSidebar/LeftSidebarLoader/LeftSidebarLoader"),f=require("../../../controllers/Users/UsersController"),d=require("../../../controllers/Chats/ChatsController"),p=require("../Chat/Chat"),m=r(require("../../../core/store/actions")),C=require("../../../core/store/Store");function v(e){return this.props.chats.filter(function(t){return i.strContains(e,t.title,!1)})}function b(e){return s(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.UsersController.search(e);case 2:return r=t.sent,t.abrupt("return",r.map(function(e){return new h.User(e)}));case 4:case"end":return t.stop()}},t)}))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length>=3?'No users found with login "'.concat(e,'"'):"For searching type 3 or more symbols"}function S(){this.props.usersRemote=[],this.props.remotePlaceholder=w(),l.HideLeftSidebarLoader()}function g(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r||l.ShowLeftSidebarLoader()(),new d.ChatsController(this).getChats(r).then(function(r){e.props.chats=r,e.props.chatsFiltered=e.props.chats,null===d.ChatsController.getSelectedChat()&&(e.$dispatch(m.selectChat(null)),e.$emit("Chat:selected")),t&&e.$emit(e.EVENTS.UPDATE)}).finally(function(){r||l.HideLeftSidebarLoader()})}function L(){var e=d.ChatsController.getSelectedChatId();return new d.ChatsController(this).getChatUsers(e)}exports.Chats={name:"Chats",template:o.default,templatorReverse:!0,components:[p.Chat,c.UserRemote],props:{view:a.LeftSidebarViews.Chats,chats:[],chatsFiltered:[],usersRemote:[],remotePlaceholder:w()},listeners:["click"],methods:{onClick:function(e){"newChat"===e.target.dataset.action&&this.$emit("ShowNewChatModal")}},subscribers:{"ChatFilter:input":function(e){this.props.chatsFiltered=v.call(this,e),this.$emit(this.EVENTS.UPDATE)},"ChatSearch:input":function(e){return s(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>=3)){t.next=9;break}return t.next=3,b(e);case 3:r=t.sent,this.props.usersRemote=r,this.props.remotePlaceholder=w(e),this.$emit(this.EVENTS.UPDATE),t.next=10;break;case 9:S.call(this);case 10:this.$emit(this.EVENTS.UPDATE);case 11:case"end":return t.stop()}},t,this)}))},toggleLeftSidebarView:function(e){return s(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==a.LeftSidebarViews.ChatsSearch){t.next=4;break}return t.next=3,L.call(this);case 3:this.props.chatUsers=t.sent;case 4:this.props.view!==e&&(S.call(this),this.props.view=e,this.$emit(this.EVENTS.UPDATE));case 5:case"end":return t.stop()}},t,this)}))},"App:destroy":function(){l.HideLeftSidebarLoader()},"Chat:selected":function(e){this.componentsInst.forEach(function(t){t.props.chat.id===e?t.methods.setActive.call(t):t.methods.setInactive.call(t)})},"Chat:updated":function(){g.call(this)},"Chat:userDeleted":function(){this.props.view===a.LeftSidebarViews.ChatsSearch&&(S.call(this),this.$emit(this.EVENTS.UPDATE))}},storeSubscribers:{},beforePrepare:function(){return s(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.LeftSidebarLoaderInit(),this.props.view=u.LeftSidebarController.getSidebarView(),e.next=4,g.call(this);case 4:this.props.usersRemote=[];case 5:case"end":return e.stop()}},e,this)}))},afterInit:function(){var e=this,t=C.Store.get().getState().checkNewMessageInterval;!this.props.newMessagesChecker&&t&&t>0&&(this.props.newMessagesChecker=setInterval(function(){g.call(e,!1,!0)},t))},beforeDestroy:function(){clearInterval(this.props.newMessagesChecker),this.props.newMessagesChecker=null}};
},{"./Chats.scss":"YK9s","../../../utils/pure-functions":"iuWH","./Chats.tmpl":"j538","../../../controllers/LeftSidebar/LeftSidebarViews":"LQRB","../UserRemote/UserRemote":"bvuj","../../../models/User":"ODHw","../../../controllers/LeftSidebar/LeftSidebarController":"BH6t","../../../controllers/LeftSidebar/LeftSidebarLoader/LeftSidebarLoader":"M52i","../../../controllers/Users/UsersController":"jyp1","../../../controllers/Chats/ChatsController":"STqM","../Chat/Chat":"mDF3","../../../core/store/actions":"VNWQ","../../../core/store/Store":"RuC9"}],"m34M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e='\n<div class="left_sidebar">\n\n    <ChatAccount></ChatAccount>\n\n    \x3c!-- Chats wrapper--\x3e\n    <div class="chats__wrapper chats_scrollable scroll_style">\n        \x3c!-- Chats --\x3e\n        <Chats></Chats>\n        \x3c!-- end chats --\x3e\n        \x3c!-- ChatsFilter --\x3e\n        <ChatFilter></ChatFilter>\n        \x3c!-- end chatsFilter --\x3e\n        \x3c!-- ChatsSearch --\x3e\n        <ChatSearch></ChatSearch>\n        \x3c!-- end chatsSearch --\x3e\n        \x3c!-- ChatsMenu --\x3e\n        <ChatsMenu></ChatsMenu>\n        \x3c!-- end chatsMenu --\x3e\n        \n    </div>\n    \x3c!-- end Chats wrapper--\x3e\n</div>\n';exports.default=e;
},{}],"Gp0c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../../controllers/LeftSidebar/LeftSidebarViews"),e='\n<div class="chats__menu">\n   <div class="menu__wrapper">\n   <button type="button" class="button button_empty_primary active" data-view="'.concat(t.LeftSidebarViews.Chats,'"><i class="fas fa-users"></i></button>\n   <button type="button" class="button button_empty_primary" data-view="').concat(t.LeftSidebarViews.ChatsFilter,'"><i class="fas fa-filter"></i></button>\n   <button type="button" class="button button_empty_primary" data-view="').concat(t.LeftSidebarViews.ChatsSearch,'"><i class="fas fa-user-plus"></i></button>\n   </div>\n</div>\n');exports.default=e;
},{"../../../controllers/LeftSidebar/LeftSidebarViews":"LQRB"}],"JoKb":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var r={};if(null!=i)for(var a in i)"default"!==a&&Object.prototype.hasOwnProperty.call(i,a)&&e(r,i,a);return t(r,i),r},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChatsMenu=void 0,require("./ChatsMenu.scss");var a=require("../../../utils/dom-abstraction"),n=r(require("./ChatsMenu.tmpl")),o=require("../../../controllers/LeftSidebar/LeftSidebarViews"),s=i(require("../../../core/store/actions")),u=require("../../../controllers/LeftSidebar/LeftSidebarController");function l(e){if(e in o.LeftSidebarViews){var t={view:e};this.$dispatch(s.leftSidebar(t)),c.call(this,e)}}function c(e){var t=this.$root.find('[data-view="'.concat(e,'"]'));this.$root.findAll("button").forEach(function(e){a.$(e).removeClass("active")}),t.addClass("active")}exports.ChatsMenu={name:"ChatsMenu",template:n.default,components:[],props:{},listeners:["click"],subscribers:{toggleLeftSidebarView:c},methods:{onClick:function(e){var t,i=null!==(t=e.target.dataset.view)&&void 0!==t?t:a.$(e.target).parent().data.view;i&&(l.call(this,i),this.$emit("toggleLeftSidebarView",i))}},afterInit:function(){var e=u.LeftSidebarController.getSidebarView();this.$emit("toggleLeftSidebarView",e)}};
},{"./ChatsMenu.scss":"YK9s","../../../utils/dom-abstraction":"eAIa","./ChatsMenu.tmpl":"Gp0c","../../../controllers/LeftSidebar/LeftSidebarViews":"LQRB","../../../core/store/actions":"VNWQ","../../../controllers/LeftSidebar/LeftSidebarController":"BH6t"}],"YDzF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e='\n<div class="chats__filter">\n   <form class="form search__wrapper" \n   <v-if="action">    \n      action="{{action}}"\n   </v-if>\n   <v-if="method">    \n      method="{{method}}"\n   </v-if>\n   >\n   <input type="text" class="input input__search_chats" name="search" value="" placeholder="Filter chats"\n   </form>\n</div>\n';exports.default=e;
},{}],"b2ar":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChatFilter=void 0,require("./ChatFilter.scss");var e=require("../../../utils/dom-abstraction"),i=t(require("./ChatFilter.tmpl")),r=require("../../../controllers/LeftSidebar/LeftSidebarViews");function s(){this.$root.addClass("show")}function a(){this.$root.removeClass("show")}exports.ChatFilter={name:"ChatFilter",template:i.default,components:[],props:{},listeners:["input"],subscribers:{toggleLeftSidebarView:function(t){if(t===r.LeftSidebarViews.ChatsFilter){s.call(this);var e=this.$root.find(".input__search_chats").val();this.$emit("ChatFilter:input",e)}else a.call(this)}},methods:{onInput:function(t){e.$(t.target).hasClass("input__search_chats")&&this.$emit("ChatFilter:input",t.target.value)}}};
},{"./ChatFilter.scss":"YK9s","../../../utils/dom-abstraction":"eAIa","./ChatFilter.tmpl":"YDzF","../../../controllers/LeftSidebar/LeftSidebarViews":"LQRB"}],"z7hh":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LeftSidebar=void 0,require("./LeftSidebar.scss");var t=require("../ChatAccount/ChatAccount"),r=require("../ChatSearch/ChatSearch"),a=require("../Chats/Chats"),s=e(require("./LeftSidebar.tmpl")),i=require("../ChatsMenu/ChatsMenu"),h=require("../ChatFilter/ChatFilter");exports.LeftSidebar={name:"LeftSidebar",template:s.default,components:[t.ChatAccount,a.Chats,h.ChatFilter,r.ChatSearch,i.ChatsMenu],props:{chats:[]},methods:{},listeners:[]};
},{"./LeftSidebar.scss":"YK9s","../ChatAccount/ChatAccount":"M6Nv","../ChatSearch/ChatSearch":"Av3N","../Chats/Chats":"C25o","./LeftSidebar.tmpl":"m34M","../ChatsMenu/ChatsMenu":"JoKb","../ChatFilter/ChatFilter":"b2ar"}],"uLw5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s='\n<v-if="block.type === \'date\'">\n   <section class="block block__date">\n      <span class="date__title">{{block.content}}</span>\n   </section>\n<v-else>\n   <section class="block block__message \n   <v-if="block.content.isforeign">\n      block_foreign\n   <v-else>\n      block_own\n   </v-if>\n   ">\n   <div class="block__username">\n      <span class="user__displayname">{{block.content.user.display_name}}</span>\n   </div>\n\n   <div class="block__user_messages">\n      <Avatar bind:user="block.content.user"></Avatar>\n      <div class="block__messages">\n            <v-for :message :index in block.content.messages>\n               <div class="message__wrapper">\n               <div class="message__content">\n                        <span class="message_text">{{message.content}}</span>\n                  </div>\n                  <span class="message__time">{{message.date.getTimeFormatted}}</span>\n               </div>\n            </v-for>\n      </div>\n   </div>\n   </section>\n   \n</v-if>\n\n';exports.default=s;
},{}],"LWVw":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Block=void 0,require("./Block.scss");var t=require("../Avatar/Avatar"),s=require("../../../utils/date"),r=e(require("./Block.tmpl"));exports.Block={name:"Block",template:r.default,components:[t.Avatar],props:{block:{}},listeners:[],subscribers:{},methods:{},beforeCreate:function(){var e=this.props.block;"messages"===e.type&&(e.content.messages=e.content.messages.map(s.mapMessageDateCustom))}};
},{"./Block.scss":"YK9s","../Avatar/Avatar":"qI6Q","../../../utils/date":"wEwS","./Block.tmpl":"uLw5"}],"U5eC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e='\n<div class="messenger">\n   \x3c!-- messenger__wrapper --\x3e\n   <div class="messenger__wrapper messenger_scrollable scroll_style">\n      <v-for :block :index in blocks>\n         <Block bind:block="blocks[{{index}}]"></Block>\n      </v-for>\n      <div class="buffer"></div>\n   </div>\n   \x3c!-- end messenger__wrapper --\x3e   \n</div>\n';exports.default=e;
},{}],"QJWQ":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockMessages=void 0;var n=require("../../../utils/pure-functions"),i=function(){function t(s,n){e(this,t),this.type="messages",this.content={isforeign:s.id!==n.id,user:s.id!==n.id?s:n,messages:[]}}return s(t,[{key:"addMessage",value:function(e){this.content.messages.push(e)}},{key:"getLastMessageTime",value:function(){var e,t;return null!==(t=null===(e=n.last(this.content.messages))||void 0===e?void 0:e.time)&&void 0!==t?t:null}}]),t}();exports.BlockMessages=i;
},{"../../../utils/pure-functions":"iuWH"}],"R0Pw":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSameDayBlocks=exports.BlockDate=void 0;var o=function(){function t(n){e(this,t),this.type="date",this.date=new Date(+Date.parse(n))}return n(t,[{key:"content",get:function(){return this.date.toLocaleDateString()}}]),t}();function r(e,t){return e.content===t.content}exports.BlockDate=o,exports.isSameDayBlocks=r;
},{}],"woFv":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function i(e){try{a(n.next(e))}catch(t){o(t)}}function c(e){try{a(n.throw(e))}catch(t){o(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,c)}a((n=n.apply(e,t||[])).next())})},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Messenger=void 0,require("./Messenger.scss");var r=require("../Block/Block"),n=require("../../../utils/pure-functions"),s=t(require("./Messenger.tmpl")),o=require("../../../controllers/AccountController/AccountController"),i=require("../../../controllers/Chats/ChatsController"),c=require("../../../controllers/Messenger/MessengerController"),a=require("../Block/BlockMessages"),u=require("../Block/BlockDate"),l=require("../../../controllers/Users/UsersController"),h=require("../../../core/Component"),f=require("../../../utils/dom-abstraction");function p(){var e=this;setTimeout(function(){window.scrollTo(0,e.$root.$el.scrollHeight)},10)}function d(){return e(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.ChatsController.getSelectedChatId(),t.next=3,g.call(this,r).then(function(t){return e(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.blocks=t,this.$emit(this.EVENTS.UPDATE);case 2:case"end":return e.stop()}},e,this)}))});case 3:case"end":return t.stop()}},t,this)}))}function g(t){return e(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r,n,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n=new c.MessengerController(this).getChatMessages(t),s=[],n.forEach(function(e){s.push(m(e,r))}),e.next=6,Promise.all(s).then(function(){return r});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}function m(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e(this,void 0,void 0,regeneratorRuntime.mark(function e(){var s,i,c,h,f,p,d,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.UsersController.get(t.user_id);case 2:if(s=e.sent,i=o.AccountController.getAccount(),!s||!i){e.next=22;break}if(0!==r.length){e.next=12;break}return c=new u.BlockDate(t.time),r.push(c),(h=new a.BlockMessages(s,i)).addMessage(t),r.push(h),e.abrupt("return");case 12:if(n.last(r).content.user.id===t.user_id){e.next=21;break}return f=new u.BlockDate(t.time),p=n.last(r),d=new u.BlockDate(p.getLastMessageTime()),u.isSameDayBlocks(f,d)||r.push(f),(g=new a.BlockMessages(s,i)).addMessage(t),r.push(g),e.abrupt("return");case 21:n.last(r).addMessage(t);case 22:case"end":return e.stop()}},e)}))}function v(e){var t=this.name;e.$emit(this.EVENTS.DESTROY),this.$remove();var r=f.$.create(t);e.$root.$el.insertAdjacentElement("afterbegin",r.$el);var n=new h.Component(C.call(e,t),r,e);e.componentsInst[0]=n}function C(e){return n.first(this.components.filter(function(t){return t.name===e}))}exports.Messenger={name:"Messenger",template:s.default,components:[r.Block],props:{chat:{},account:{},blocks:[]},listeners:[],subscribers:{"App:afterInit":function(){p.call(this)},"Message:new":function(){return e(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d.call(this);case 1:case"end":return e.stop()}},e,this)}))}},storeSubscribers:{accountSettings:function(e){this.props.account=e,this.$emit(this.EVENTS.UPDATE)},selectedChatId:function(t){return e(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.call(this,this.parentComponent);case 1:case"end":return e.stop()}},e,this)}))}},methods:{},beforePrepare:function(){this.props.account=o.AccountController.getAccount(),new c.MessengerController(this).fetchMessages(i.ChatsController.getSelectedChatId()),d.call(this)},beforeCreate:function(){var e=this.props;e.chat=i.ChatsController.getSelectedChat(),e.chatId=i.ChatsController.getSelectedChatId(),new c.MessengerController(this).connect()},afterInit:function(){p.call(this)},beforeDestroy:function(){this.rebuild=!0,new c.MessengerController(this).disconnect()}};
},{"./Messenger.scss":"YK9s","../Block/Block":"LWVw","../../../utils/pure-functions":"iuWH","./Messenger.tmpl":"U5eC","../../../controllers/AccountController/AccountController":"uDpL","../../../controllers/Chats/ChatsController":"STqM","../../../controllers/Messenger/MessengerController":"MNDB","../Block/BlockMessages":"QJWQ","../Block/BlockDate":"R0Pw","../../../controllers/Users/UsersController":"jyp1","../../../core/Component":"Gxci","../../../utils/dom-abstraction":"eAIa"}],"zCaQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t='\n<div class="messenger__menu">\n   <form class="form messenger__form" \n   <v-if="action">    \n      action="{{action}}"\n   </v-if>\n   <v-if="method">    \n      method="{{method}}"\n   </v-if>\n   >\n      <div class="input__wrapper">\n         <button type="button" class="button button__attach button_empty_primary"><i class="fas fa-paperclip fa-2x"></i></button>\n         <input type="text" class="hidden" name="attachment" value=""/>\n         <input type="text" class="input input__message" name="message" value="" placeholder="Type a new message ..."/>\n         <button type="submit" class="button button__submit button_primary">Send</button>\n      </div>\n   </form>\n</div>\n';exports.default=t;
},{}],"xbAi":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessengerMenu=void 0,require("./MessengerMenu.scss");var s=require("../../../utils/dom-abstraction"),r=e(require("./MessengerMenu.tmpl")),t=require("../../../core/validator/validators"),a=require("../../../core/validator/form"),o=require("../../../controllers/Messenger/MessengerController"),i=t.Validators.restrictedSymbols;exports.MessengerMenu={name:"MessengerMenu",template:r.default,components:[],props:{form:{message:{value:"",validators:{restrictedSymbols:i}}}},listeners:["submit","click","keyup"],subscribers:{},methods:{onKeyup:function(e){var r=s.$(e.target);if(r.hasClass("input__message")){this.props.form.message.value=e.target.value;var t=a.useForm(this.props.form).controls;t&&t.message.valid?r.removeClass("invalid"):r.addClass("invalid")}},onSubmit:function(e){var r=s.$(e.target);if(r.hasClass("messenger__form")){e.preventDefault();var t=a.useForm(this.props.form).controls;if(t&&!t.message.valid&&(r.addClass("invalid"),t.message.errors))return void alert(t.message.errors.restrictedSymbols.message);var i=new FormData(e.target);new o.MessengerController(this).sendTextMessage(i),s.$(e.target).find("input.input__message").val("")}},onClick:function(e){(s.$(e.target).hasClass("button__attach")||s.$(e.target).hasClass("fa-paperclip"))&&console.log("TODO This attaches something...")}}};
},{"./MessengerMenu.scss":"YK9s","../../../utils/dom-abstraction":"eAIa","./MessengerMenu.tmpl":"zCaQ","../../../core/validator/validators":"Qo4P","../../../core/validator/form":"OWmm","../../../controllers/Messenger/MessengerController":"MNDB"}],"Abwx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t='\n<div class="info__wrapper scroll_style">\n        <button type="button" class="button button__close button_primary">&times;</button>\n        <section class="right_sidebar__content"></section>\n    </div>\n';exports.default=t;
},{}],"EVkC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../../controllers/RightSidebar/RightSidebarViews"),n='\n<form class="info__section form__avatar_change"\n<v-if="action">    \n    action="{{action}}"\n</v-if>\n<v-if="method">    \n    method="{{method}}"\n</v-if>\n>\n    <div class="info__content" >\n        <h3>Change Avatar</h3>\n        <Avatar bind:user="account" bind:css="avatar__info" bind:id="user_info__avatar"></Avatar>\n        <div class="upload_wrapper">\n        <label>Upload picture</label>\n        <InputFileGroup bind:id="avatar_upload" bind:name="avatar"></InputFileGroup>\n        </div>\n    </div>\n    \n    <div class="info__actions">\n    <button type="submit" class="button info__button button_primary" data-action="submit">Update</button>\n    <button type="button" class="button info__button button_outline_primary" data-view="'.concat(t.RightSidebarViews.InfoAccount,'">Cancel</button>\n    </div>\n</form>\n');exports.default=n;
},{"../../../controllers/RightSidebar/RightSidebarViews":"WKkM"}],"f0uY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i='\n<div \n<v-if="id">\n    id="{{id}}"\n</v-if> \nclass="input_file">\n    <div class="form-group">\n        <input type="file" name="{{name}}" id="{{id}}-file" class="input-file">\n        <label for="{{id}}-file" class="input">\n            <i class="icon fa fa-upload"></i>&nbsp;\n            <span class="filename">Upload file</span>\n        </label>\n    </div>\n</div>\n';exports.default=i;
},{}],"IQKm":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputFileGroup=void 0;var t=e(require("./InputFileGroup.tmpl"));require("./InputFileGroup.scss");var i=require("../../../utils/dom-abstraction");function r(e){var t=e.find(".input-file"),i=e.find("label"),r=i.$el.innerHTML,s="",n=t.$el;n.name&&(s=n.value.split("\\").pop()),s?(i.addClass("has-file"),i.find(".filename").text(s)):(i.removeClass("has-file"),i.html(r))}exports.InputFileGroup={name:"InputFileGroup",template:t.default,components:[],props:{id:"",name:""},listeners:["change"],subscribers:{},methods:{onChange:function(e){i.$(e.target).hasClass("input-file")&&r(this.$root)}}};
},{"./InputFileGroup.tmpl":"f0uY","./InputFileGroup.scss":"YK9s","../../../utils/dom-abstraction":"eAIa"}],"HLAc":[function(require,module,exports) {
"use strict";var r=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FormChangeAvatar=void 0;var e=r(require("./FormChangeAvatar.tmpl"));require("./FormChangeAvatar.scss");var t=require("../Avatar/Avatar"),a=require("../InputFileGroup/InputFileGroup"),o=require("../../../utils/dom-abstraction"),n=require("../../../controllers/AccountController/AccountController");exports.FormChangeAvatar={name:"FormChangeAvatar",template:e.default,components:[t.Avatar,a.InputFileGroup],props:{account:{}},listeners:["submit"],subscribers:{},storeSubscribers:{},methods:{onSubmit:function(r){o.$(r.target).hasClass("form__avatar_change")&&(r.preventDefault(),new n.AccountController(this).changeAvatar(new FormData(r.target)))}},beforeCreate:function(){this.props.account=n.AccountController.getAccount()}};
},{"./FormChangeAvatar.tmpl":"EVkC","./FormChangeAvatar.scss":"YK9s","../Avatar/Avatar":"qI6Q","../InputFileGroup/InputFileGroup":"IQKm","../../../utils/dom-abstraction":"eAIa","../../../controllers/AccountController/AccountController":"uDpL"}],"pKpg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=require("../../../controllers/RightSidebar/RightSidebarViews"),t='\n<form class="info__section form__account_settings"\n<v-if="action">    \n    action="{{action}}"\n</v-if>\n<v-if="method">    \n    method="{{method}}"\n</v-if>\n>\n    <div class="info__content" >\n        <h3>Account Settings</h3>\n\n        <v-for :field :index in fields>\n        <InputGroup bind:property="form.{{field.id}}" bind:control="form_control.{{field.id}}" bind:options="fields[{{index}}]"></InputGroup>\n        </v-for>\n    </div>\n    \n    <div class="info__actions">\n    <button type="submit" class="button info__button button_outline_primary" data-action="submit">Update</button>\n    <button type="button" class="button info__button button_outline_primary" data-view="'.concat(n.RightSidebarViews.InfoAccount,'">Cancel</button>        \n    </div>\n</form>\n');exports.default=t;
},{"../../../controllers/RightSidebar/RightSidebarViews":"WKkM"}],"oc9L":[function(require,module,exports) {
"use strict";var r=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FormAccountSettings=void 0;var e=r(require("./FormAccountSettings.tmpl"));require("./FormAccountSettings.scss");var t=require("../InputGroup/InputGroup"),o=require("../../../utils/dom-abstraction"),i=require("../../../core/validator/form"),s=require("../../../core/validator/validators"),n=require("../../../controllers/AccountController/AccountController"),a=s.Validators,u=a.required,c=a.email,l=a.minLength;exports.FormAccountSettings={name:"FormAccountSettings",template:e.default,components:[t.InputGroup],props:{account:{},form:{},form_control:{}},listeners:["submit","blur"],subscribers:{},methods:{onBlur:function(r){i.checkInputForm(r.target,this.props.form)&&i.verify(this)(r.target)},onSubmit:function(r){o.$(r.target).hasClass("form__account_settings")&&(r.preventDefault(),new n.AccountController(this).update(new FormData(r.target)))}},beforePrepare:function(){this.props.account=n.AccountController.getAccount(),this.props.form={login:{value:this.props.account.login,validators:{required:u}},email:{value:this.props.account.email,validators:{required:u,email:c}},first_name:{value:this.props.account.first_name,validators:{required:u}},second_name:{value:this.props.account.second_name,validators:{required:u}},display_name:{value:this.props.account.display_name,validators:{required:u}},phone:{value:this.props.account.phone,validators:{required:u,minLength:l(4)}}}},beforeCreate:function(){this.props.fields=i.prepareFormFields(this.props.form)}};
},{"./FormAccountSettings.tmpl":"pKpg","./FormAccountSettings.scss":"YK9s","../InputGroup/InputGroup":"wfDr","../../../utils/dom-abstraction":"eAIa","../../../core/validator/form":"OWmm","../../../core/validator/validators":"Qo4P","../../../controllers/AccountController/AccountController":"uDpL"}],"eobP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=require("../../../controllers/RightSidebar/RightSidebarViews"),t='\n<form class="info__section form__change_password"\n<v-if="action">    \n    action="{{action}}"\n</v-if>\n<v-if="method">    \n    method="{{method}}"\n</v-if>\n>\n    <div class="info__content content__password" >\n        <h3>Change your password</h3>\n\n        <v-for :field :index in fields>\n        <InputGroup bind:property="form.{{field.id}}" bind:control="form_control.{{field.id}}" bind:options="fields[{{index}}]"></InputGroup>\n        </v-for>\n    </div>\n    \n    <div class="info__actions">\n    <button type="submit" class="button info__button button_outline_primary" data-action="submit">Update</button>\n    <button type="button" class="button info__button button_outline_primary" data-view="'.concat(n.RightSidebarViews.InfoAccount,'">Cancel</button>        \n    </div>\n</form>\n');exports.default=t;
},{"../../../controllers/RightSidebar/RightSidebarViews":"WKkM"}],"dq9n":[function(require,module,exports) {
"use strict";var r=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FormPasswordChange=void 0;var e=r(require("./FormPasswordChange.tmpl"));require("./FormPasswordChange.scss");var o=require("../InputGroup/InputGroup"),s=require("../../../utils/dom-abstraction"),t=require("../../../core/validator/validators"),a=require("../../../core/validator/form"),n=require("../../../controllers/AccountController/AccountController"),i=t.Validators,u=i.required,p=i.same,l=i.minLength;exports.FormPasswordChange={name:"FormPasswordChange",template:e.default,components:[o.InputGroup],props:{form:{},form_control:{}},listeners:["submit","blur"],subscribers:{},methods:{onBlur:function(r){a.checkInputForm(r.target,this.props.form)&&a.verify(this)(r.target)},onSubmit:function(r){s.$(r.target).hasClass("form__change_password")&&(r.preventDefault(),a.verify(this)()&&new n.AccountController(this).changePassword(new FormData(r.target)))}},beforePrepare:function(){this.props.account=n.AccountController.getAccount(),this.props.form={old_password:{value:"",type:"password",validators:{required:u,minLength:l(3)}},new_password:{value:"",type:"password",validators:{required:u,minLength:l(3)}},confirm_new_password:{value:"",type:"password",validators:{required:u,minLength:l(3),same:p("#new_password",!0)},errorReason:{same:"This field is not equal with New Password"}}}},beforeCreate:function(){this.props.fields=a.prepareFormFields(this.props.form)}};
},{"./FormPasswordChange.tmpl":"eobP","./FormPasswordChange.scss":"YK9s","../InputGroup/InputGroup":"wfDr","../../../utils/dom-abstraction":"eAIa","../../../core/validator/validators":"Qo4P","../../../core/validator/form":"OWmm","../../../controllers/AccountController/AccountController":"uDpL"}],"pd1q":[function(require,module,exports) {
"use strict";function e(e){return n(e)||i(e)||r(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function i(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function n(e){if(Array.isArray(e))return o(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var a=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return c(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RightSidebarDecorator=void 0;var s=require("../../utils/mergeDeep"),l=require("../../utils/pure-functions"),f=require("./RightSidebarViews"),d=u(require("../../core/store/actions"));function h(t){t.listeners=l.arrayUnique([].concat(e(t.listeners||[]),["click"]));var r=function(e){e.target.dataset.view&&m.call(this,e.target.dataset.view)};if(t.methods&&t.methods.onClick){var i=t.methods.onClick;s.mergeDeep(t.methods||{},{onClick:function(e){i.call(this,e),r.call(this,e)}})}else t.methods=s.mergeDeep(t.methods||{},{onClick:r});return t}function m(e){if(e in f.RightSidebarViews){var t={componentName:e};this.$dispatch(d.rightSidebar(t))}}exports.RightSidebarDecorator=h;
},{"../../utils/mergeDeep":"a1Qj","../../utils/pure-functions":"iuWH","./RightSidebarViews":"WKkM","../../core/store/actions":"VNWQ"}],"TTWD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../../controllers/RightSidebar/RightSidebarViews"),n='\n<form class="info__section form__avatar_change"\n<v-if="action">    \n    action="{{action}}"\n</v-if>\n<v-if="method">    \n    method="{{method}}"\n</v-if>\n>\n    <div class="info__content" >\n        <h3>Change chat avatar</h3>\n        <Avatar bind:user="chat" bind:css="avatar__info" bind:id="user_info__avatar"></Avatar>\n        <div class="upload_wrapper">\n        <label>Upload picture</label>\n        <InputFileGroup bind:id="avatar_upload" bind:name="avatar"></InputFileGroup>\n        </div>\n    </div>\n    \n    <div class="info__actions">\n    <button type="submit" class="button info__button button_primary" data-action="submit">Update</button>\n    <button type="button" class="button info__button button_outline_primary" data-view="'.concat(t.RightSidebarViews.InfoChat,'">Cancel</button>\n    </div>\n</form>\n');exports.default=n;
},{"../../../controllers/RightSidebar/RightSidebarViews":"WKkM"}],"qk0A":[function(require,module,exports) {
"use strict";var r=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FormChangeChatAvatar=void 0;var t=r(require("./FormChangeChatAvatar.tmpl"));require("./FormChangeChatAvatar.scss");var e=require("../Avatar/Avatar"),a=require("../InputFileGroup/InputFileGroup"),o=require("../../../utils/dom-abstraction"),s=require("../../../controllers/RightSidebar/RightSidebarController"),i=require("../../../controllers/Chats/ChatsController");exports.FormChangeChatAvatar={name:"FormChangeChatAvatar",template:t.default,components:[e.Avatar,a.InputFileGroup],props:{chat:{}},listeners:["submit"],subscribers:{},methods:{onSubmit:function(r){o.$(r.target).hasClass("form__avatar_change")&&(r.preventDefault(),new i.ChatsController(this).uploadAvatar(this.props.chat.id,new FormData(r.target)))}},beforePrepare:function(){this.props.chat=s.RightSidebarController.getChat()}};
},{"./FormChangeChatAvatar.tmpl":"TTWD","./FormChangeChatAvatar.scss":"YK9s","../Avatar/Avatar":"qI6Q","../InputFileGroup/InputFileGroup":"IQKm","../../../utils/dom-abstraction":"eAIa","../../../controllers/RightSidebar/RightSidebarController":"EnQ7","../../../controllers/Chats/ChatsController":"STqM"}],"wyDI":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RightSidebar=void 0,require("./RightSidebar.scss");var r=require("../../../utils/dom-abstraction"),t=require("../InfoAccount/InfoAccount"),o=e(require("./RightSidebar.tmpl")),i=require("../FormChangeAvatar/FormChangeAvatar"),a=require("../FormAccountSettings/FormAccountSettings"),n=require("../FormPasswordChange/FormPasswordChange"),s=require("../../../controllers/RightSidebar/RightSidebarController"),h=require("../../../controllers/RightSidebar/RightSidebarDecorators"),c=require("../InfoChat/InfoChat"),u=require("../FormChangeChatAvatar/FormChangeChatAvatar");exports.RightSidebar=h.RightSidebarDecorator({name:"RightSidebar",template:o.default,components:[t.InfoAccount,i.FormChangeAvatar,a.FormAccountSettings,n.FormPasswordChange,c.InfoChat,u.FormChangeChatAvatar],props:{page:"contact-info"},listeners:["click"],subscribers:{},storeSubscribers:{rightSidebar:function(){new s.RightSidebarController(this).changeContent()}},methods:{onClick:function(e){r.$(e.target).hasClass("button__close")&&this.$emit("closeRightSidebar")}},beforeInitChildren:function(){new s.RightSidebarController(this).addContent()}});
},{"./RightSidebar.scss":"YK9s","../../../utils/dom-abstraction":"eAIa","../InfoAccount/InfoAccount":"Dq4W","./RightSidebar.tmpl":"Abwx","../FormChangeAvatar/FormChangeAvatar":"HLAc","../FormAccountSettings/FormAccountSettings":"oc9L","../FormPasswordChange/FormPasswordChange":"dq9n","../../../controllers/RightSidebar/RightSidebarController":"EnQ7","../../../controllers/RightSidebar/RightSidebarDecorators":"pd1q","../InfoChat/InfoChat":"TRGA","../FormChangeChatAvatar/FormChangeChatAvatar":"qk0A"}],"OpKh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e='\n<main class="main right_sidebar__close <v-if="!is_selected">chat_not_selected</v-if> ">\n\n         \x3c!-- messenger --\x3e\n         <Messenger></Messenger>\n         \x3c!-- end messenger --\x3e\n\n         \x3c!-- messenger form --\x3e\n         <MessengerMenu></MessengerMenu>\n         \x3c!-- end form --\x3e\n\n         <div class="chat_placeholder">\n         <h3>\n         Select a chat to type with...\n         </h3>\n         </div>\n\n   \x3c!-- Right-sidebar --\x3e\n   <RightSidebar bind:page="page"></RightSidebar>\n   \x3c!-- end Right-sidebar --\x3e\n</main>\n';exports.default=e;
},{}],"leC2":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var r={};if(null!=i)for(var s in i)"default"!==s&&Object.prototype.hasOwnProperty.call(i,s)&&e(r,i,s);return t(r,i),r},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MainWindow=void 0,require("./MainWindow.scss");var s=require("../Messenger/Messenger"),o=require("../MessengerMenu/MessengerMenu"),n=require("../RightSidebar/RightSidebar"),a=i(require("../../../core/store/actions")),c=r(require("./MainWindow.tmpl")),d=require("../../../controllers/RightSidebar/RightSidebarController"),l=require("../../../controllers/Chats/ChatsController"),h=require("../../../utils/dom-abstraction");function u(){h.$(".main").removeClass("chat_not_selected")}function p(){h.$(".main").addClass("chat_not_selected")}exports.MainWindow={name:"MainWindow",template:c.default,components:[s.Messenger,o.MessengerMenu,n.RightSidebar],props:{},listeners:[],subscribers:{closeRightSidebar:function(){this.$root.addClass("right_sidebar__close");this.$dispatch(a.rightSidebar({status:"close"}))},openRightSidebar:function(e){this.$root.removeClass("right_sidebar__close");var t={status:"open",componentName:(null==e?void 0:e.componentName)||"InfoAccount",chat:(null==e?void 0:e.chat)||null};this.$dispatch(a.rightSidebar(t))},toggleRightSidebar:function(){this.$root.hasClass("right_sidebar__close")?this.$emit("openRightSidebar"):this.$emit("closeRightSidebar")},refreshRightSidebar:function(e){var t={componentName:e.componentName||"InfoAccount",chat:e.chat||null};this.$dispatch(a.rightSidebar(t))}},storeSubscribers:{selectedChatId:function(e){e&&e>0?(this.props.is_selected=!1,u()):(this.props.is_selected=!0,p())}},methods:{},beforePrepare:function(){},beforeCreate:function(){this.props.selectedChatId=l.ChatsController.getSelectedChatId(),this.props.is_selected=this.props.selectedChatId>0},afterInit:function(){var e=d.RightSidebarController.getState();"open"===e.status?this.$emit("openRightSidebar",e):this.$emit("closeRightSidebar")}};
},{"./MainWindow.scss":"YK9s","../Messenger/Messenger":"woFv","../MessengerMenu/MessengerMenu":"xbAi","../RightSidebar/RightSidebar":"wyDI","../../../core/store/actions":"VNWQ","./MainWindow.tmpl":"OpKh","../../../controllers/RightSidebar/RightSidebarController":"EnQ7","../../../controllers/Chats/ChatsController":"STqM","../../../utils/dom-abstraction":"eAIa"}],"scLh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e='\n   <div class="fluid-container">\n      <LeftSidebar></LeftSidebar>\n      <MainWindow></MainWindow>\n      <ModalNewChat></ModalNewChat>\n   </div>\n';exports.default=e;
},{}],"FGWm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n='\n<div class="modal_new_chat">\n   <div class="modal_new_chat__overlay"></div>\n\n   <form class="modal_new_chat__card">\n      <div class="card__header"><span>Create a new Chat</span></div>\n      <div class="card__body">\n      <InputGroup bind:property="form.title" bind:control="form_control.title" bind:options="fields[0]"></InputGroup>\n      </div>\n      <div class="card__footer">\n         <button\n            type="button"\n            class="button button_outline_primary"\n            data-action="cancel"\n         >\n            Cancel\n         </button>\n         <button\n            type="submit"\n            class="button button_primary"\n            data-action="newChatSubmit"\n         >\n            Create\n         </button>\n      </div>\n   </form>\n</div>\n\n';exports.default=n;
},{}],"Pf5l":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModalNewChat=void 0;var t=require("../../../controllers/Chats/ChatsController"),r=require("../../../core/validator/form"),o=require("../../../core/validator/validators"),a=require("../../../utils/dom-abstraction"),i=require("../InputGroup/InputGroup");require("./ModalNewChat.scss");var s=e(require("./ModalNewChat.tmpl")),n=o.Validators,l=n.required,u=n.minLength;function c(){a.$(".modal_new_chat").addClass("open")}function d(){var e=this;a.$(".modal_new_chat").removeClass("open"),setTimeout(function(){e.$emit(e.EVENTS.UPDATE)},300)}exports.ModalNewChat={name:"ModalNewChat",template:s.default,components:[i.InputGroup],props:{form:{},form_control:{}},listeners:["click","blur","submit"],subscribers:{ShowNewChatModal:c,HideNewChatModal:function(){d.call(this)}},methods:{onBlur:function(e){r.checkInputForm(e.target,this.props.form)&&r.verify(this)(e.target)},onClick:function(e){(a.$(e.target).hasClass("modal_new_chat__overlay")||"cancel"===e.target.dataset.action)&&d.call(this)},onSubmit:function(e){a.$(e.target).hasClass("modal_new_chat__card")&&(e.preventDefault(),new t.ChatsController(this).createChat(new FormData(e.target)))}},beforePrepare:function(){},beforeCreate:function(){this.props.form={title:{value:"",validators:{required:l,minLength:u(3)}}},this.props.fields=r.prepareFormFields(this.props.form)}};
},{"../../../controllers/Chats/ChatsController":"STqM","../../../core/validator/form":"OWmm","../../../core/validator/validators":"Qo4P","../../../utils/dom-abstraction":"eAIa","../InputGroup/InputGroup":"wfDr","./ModalNewChat.scss":"YK9s","./ModalNewChat.tmpl":"FGWm"}],"yIn4":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=void 0,require("./App.scss");var r=require("../../structural/LeftSidebar/LeftSidebar"),t=require("../../structural/MainWindow/MainWindow"),a=e(require("./App.tmpl")),i=require("../../structural/ModalNewChat/ModalNewChat");exports.App={name:"App",template:a.default,components:[r.LeftSidebar,t.MainWindow,i.ModalNewChat],props:{pagename:"chats"},subscribers:{}};
},{"./App.scss":"RHFU","../../structural/LeftSidebar/LeftSidebar":"z7hh","../../structural/MainWindow/MainWindow":"leC2","./App.tmpl":"scLh","../../structural/ModalNewChat/ModalNewChat":"Pf5l"}],"Xp1J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorPage404=void 0;var e=require("../../../core/router/Router");require("./ErrorPage.scss");var r='\n<div class="fluid-container">\n   <div class="main__default">\n      <div class="main__wrapper">\n         <h1>Oops! No conversation here</h1>\n         <p>The page you\'re looking for beyond our reach.</p>\n         <a href="#" data-action="back">&larr; Let\'s go back</a>\n      </div>\n      <div class="default__right_sidebar">\n         <div class="info__content">\n            <span class="error_page__title">404</span>\n         </div>\n      </div>\n   </div>\n</div>\n';exports.ErrorPage404={name:"ErrorPage404",template:r,props:{pagename:"404"},listeners:["click"],methods:{onClick:function(r){"back"===r.target.dataset.action&&(r.preventDefault(),e.Router.back())}}};
},{"../../../core/router/Router":"uA50","./ErrorPage.scss":"RHFU"}],"lG9g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorPage500=void 0;var e=require("../../../core/router/Router");require("./ErrorPage.scss");var r='\n<div id="app" class="fluid-container">\n   <div class="main__default">\n      <div class="main__wrapper">\n         <h1>Oops! Houston, we have a problem.</h1>\n         <p>Server error. Please contact on administrator</p>\n         <a href="#" data-action="back">&larr; Let\'s go back</a>\n      </div>\n      <div class="default__right_sidebar">\n         <div class="info__content">\n            <span class="error_page__title">500</span>\n         </div>\n      </div>\n   </div>\n</div>\n';exports.ErrorPage500={name:"ErrorPage500",template:r,props:{pagename:"500"},listeners:["click"],methods:{onClick:function(r){"back"===r.target.dataset.action&&(r.preventDefault(),e.Router.back())}}};
},{"../../../core/router/Router":"uA50","./ErrorPage.scss":"RHFU"}],"Y2qJ":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&r(e.prototype,n),o&&r(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppController=void 0;var o=require("../../components/pages/App/App"),t=require("../../components/pages/ErrorPage/404"),u=require("../../components/pages/ErrorPage/500"),a=function(){function r(){e(this,r)}return n(r,null,[{key:"index",value:function(){return o.App}},{key:"error404",value:function(){return t.ErrorPage404}},{key:"error500",value:function(){return u.ErrorPage500}}]),r}();exports.AppController=a;
},{"../../components/pages/App/App":"yIn4","../../components/pages/ErrorPage/404":"Xp1J","../../components/pages/ErrorPage/500":"lG9g"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("regenerator-runtime/runtime");var e=require("./core/store/Store"),r=require("./core/store/rootReducer"),t=require("./utils/storage"),o=require("./core/router/Router"),s=require("./controllers/App/AppController"),u=require("./controllers/Auth/AuthController"),n=e.createStore(r.rootReducer,Object.assign({checkNewMessageInterval:5e3},t.storage("ec-app-state")));n.subscribe(function(e){console.log("App state: ",e),t.storage("ec-app-state",e)}),(new o.Router).use("chats",s.AppController.index()).use("signin",u.AuthController.indexSignIn()).use("signup",u.AuthController.indexSignUp()).use("404",s.AppController.error404()).use("500",s.AppController.error500()).init("#app");
},{"regenerator-runtime/runtime":"VuXv","./core/store/Store":"RuC9","./core/store/rootReducer":"D2p9","./utils/storage":"OF6u","./core/router/Router":"uA50","./controllers/App/AppController":"Y2qJ","./controllers/Auth/AuthController":"noA6"}]},{},["QCba"], null)
//# sourceMappingURL=/src.33ddc0dc.js.map